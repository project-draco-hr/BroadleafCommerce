{
  List<StructuredContent> sandBoxContentList=null;
  String cacheKey=buildNameKey(getProductionSandBox(sandBox),locale,contentType.getName(),contentName);
  cacheKey=cacheKey + "-" + secure;
  List<StructuredContentDTO> productionContentDTOList=getStructuredContentListFromCache(cacheKey);
  if (productionContentDTOList == null) {
    List<StructuredContent> productionContentList=structuredContentDao.findActiveStructuredContentByNameAndType(getProductionSandBox(sandBox),contentType,contentName,locale);
    productionContentDTOList=buildStructuredContentDTOList(productionContentList,secure);
    if (productionContentDTOList != null) {
      addStructuredContentListToCache(cacheKey,productionContentDTOList);
    }
  }
  final List<StructuredContentDTO> contentList;
  if (!isProductionSandBox(sandBox)) {
    sandBoxContentList=structuredContentDao.findActiveStructuredContentByNameAndType(sandBox,contentType,contentName,locale);
    contentList=mergeContent(productionContentDTOList,sandBoxContentList,secure);
  }
 else {
    contentList=productionContentDTOList;
  }
  return evaluateAndPriortizeContent(contentList,count,ruleDTOs);
}
