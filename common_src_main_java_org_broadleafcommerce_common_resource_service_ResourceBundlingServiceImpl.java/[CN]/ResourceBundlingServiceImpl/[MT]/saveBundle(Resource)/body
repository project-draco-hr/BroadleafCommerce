{
  File file=new File(getFilePath(resource.getDescription()));
  if (!file.getParentFile().exists()) {
    if (!file.getParentFile().mkdirs()) {
      if (!file.getParentFile().exists()) {
        throw new RuntimeException("Unable to create middle directories for file: " + file.getAbsolutePath());
      }
    }
  }
  try {
    BufferedOutputStream out=new BufferedOutputStream(new FileOutputStream(file));
    StreamUtils.copy(resource.getInputStream(),out);
  }
 catch (  IOException e) {
    throw new RuntimeException(e);
  }
}
