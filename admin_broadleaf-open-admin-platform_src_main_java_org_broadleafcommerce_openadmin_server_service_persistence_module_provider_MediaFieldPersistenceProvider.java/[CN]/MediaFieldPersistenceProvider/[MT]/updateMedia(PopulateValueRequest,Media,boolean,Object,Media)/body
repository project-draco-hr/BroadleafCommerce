{
  if (!persist) {
    parent=populateValueRequest.getPersistenceManager().getDynamicEntityDao().merge(parent);
    media=establishMedia(populateValueRequest,parent);
  }
  updateMediaFields(media,newMedia);
  if (persist) {
    populateValueRequest.getPersistenceManager().getDynamicEntityDao().persist(parent);
  }
}
