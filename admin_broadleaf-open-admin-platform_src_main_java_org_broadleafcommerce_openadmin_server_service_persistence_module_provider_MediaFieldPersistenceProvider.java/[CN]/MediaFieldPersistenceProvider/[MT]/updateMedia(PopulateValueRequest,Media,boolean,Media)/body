{
  if (!persist) {
    media=populateValueRequest.getPersistenceManager().getDynamicEntityDao().merge(media);
  }
  updateMediaFields(media,newMedia);
  if (persist) {
    populateValueRequest.getPersistenceManager().getDynamicEntityDao().persist(media);
  }
}
