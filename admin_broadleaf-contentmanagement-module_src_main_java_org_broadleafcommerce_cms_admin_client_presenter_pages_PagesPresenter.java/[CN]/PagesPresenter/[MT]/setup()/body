{
  super.setup();
  getPresenterSequenceSetupManager().addOrReplaceItem(new PresenterSetupItem("scCustomerDS",new CustomerListDataSourceFactory(),new AsyncCallbackAdapter(){
    @Override public void onSetupSuccess(    DataSource result){
      ((DynamicEntityDataSource)result).permanentlyShowFields("id");
    }
  }
));
  getPresenterSequenceSetupManager().addOrReplaceItem(new PresenterSetupItem("scProductDS",new ProductListDataSourceFactory(),new NullAsyncCallbackAdapter()));
  getPresenterSequenceSetupManager().addOrReplaceItem(new PresenterSetupItem("timeDTODS",new TimeDTOListDataSourceFactory(),new NullAsyncCallbackAdapter()));
  getPresenterSequenceSetupManager().addOrReplaceItem(new PresenterSetupItem("requestDTODS",new RequestDTOListDataSourceFactory(),new NullAsyncCallbackAdapter()));
  getPresenterSequenceSetupManager().addOrReplaceItem(new PresenterSetupItem("scOrderItemDS",new OrderItemListDataSourceFactory(),new AsyncCallbackAdapter(){
    @Override public void onSetupSuccess(    DataSource result){
      ((DynamicEntityDataSource)result).permanentlyShowFields("product.id","category.id","sku.id");
      initializer=new PagesPresenterInitializer(PagesPresenter.this,(DynamicEntityDataSource)result,getPresenterSequenceSetupManager().getDataSource("scOrderItemDS"));
      extractor=new PagesPresenterExtractor(PagesPresenter.this);
    }
  }
));
  getPresenterSequenceSetupManager().addOrReplaceItem(new PresenterSetupItem("pageDS",new PageDataSourceFactory(),new AsyncCallbackAdapter(){
    @Override public void onSetupSuccess(    DataSource top){
      setupDisplayItems(top,getPresenterSequenceSetupManager().getDataSource("scCustomerDS"),getPresenterSequenceSetupManager().getDataSource("timeDTODS"),getPresenterSequenceSetupManager().getDataSource("requestDTODS"),getPresenterSequenceSetupManager().getDataSource("scOrderItemDS"),getPresenterSequenceSetupManager().getDataSource("scProductDS"));
      ((ListGridDataSource)top).setupGridFields(new String[]{"locked","fullUrl","description","pageTemplate_Grid"});
    }
  }
));
  getPresenterSequenceSetupManager().addOrReplaceItem(new PresenterSetupItem("pageTemplateSearchDS",new PageTemplateSearchListDataSourceFactory(),new OperationTypes(OperationType.ENTITY,OperationType.ENTITY,OperationType.ENTITY,OperationType.ENTITY,OperationType.ENTITY),new Object[]{},new AsyncCallbackAdapter(){
    @Override public void onSetupSuccess(    DataSource result){
      ListGridDataSource pageTemplateDataSource=(ListGridDataSource)result;
      pageTemplateDataSource.resetPermanentFieldVisibility("templateName","templatePath");
      EntitySearchDialog pageTemplateSearchView=new EntitySearchDialog(pageTemplateDataSource,true);
      pageTemplateDialogView=pageTemplateSearchView;
      getPresenterSequenceSetupManager().getDataSource("pageDS").getFormItemCallbackHandlerManager().addSearchFormItemCallback("pageTemplate",pageTemplateSearchView,"Page Template Search",getDisplay().getDynamicFormDisplay(),new FormItemCallback(){
        @Override public void execute(        FormItem formItem){
          if (currentPageRecord != null && BLCMain.ENTITY_ADD.getHidden()) {
            destroyTemplateForm();
            loadTemplateForm(currentPageRecord,null);
          }
        }
      }
);
    }
  }
));
}
