{
  BLCMain.NON_MODAL_PROGRESS.startProgress();
  getPresenterSequenceSetupManager().addOrReplaceItem(new PresenterSetupItem("pageTemplateFormDS",new PageTemplateFormListDataSourceFactory(),null,new String[]{"constructForm",pageTemplateId != null ? pageTemplateId : selectedRecord.getAttribute("pageTemplate")},new AsyncCallbackAdapter(){
    @Override public void onSetupSuccess(    DataSource dataSource){
      destroyTemplateForm();
      final FormOnlyView formOnlyView=new FormOnlyView(dataSource,true,true,false);
      formOnlyView.getForm().addItemChangedHandler(new ItemChangedHandler(){
        @Override public void onItemChanged(        ItemChangedEvent event){
          resetButtons();
        }
      }
);
      formOnlyView.setID("pageTemplateForm");
      formOnlyView.setOverflow(Overflow.VISIBLE);
      ((FormOnlyView)getDisplay().getDynamicFormDisplay().getFormOnlyDisplay()).addMember(formOnlyView);
      ((PageTemplateFormListDataSource)dataSource).setCustomCriteria(new String[]{"constructForm",selectedRecord.getAttribute("id")});
      BLCMain.NON_MODAL_PROGRESS.startProgress();
      formOnlyView.getForm().fetchData(new Criteria(),new DSCallback(){
        @Override public void execute(        DSResponse response,        Object rawData,        DSRequest request){
          if (!selectedRecord.getAttributeAsBoolean("lockedFlag")) {
            formOnlyView.getForm().enable();
          }
          if (cb != null) {
            cb.processComplete();
          }
        }
      }
);
    }
  }
));
}
