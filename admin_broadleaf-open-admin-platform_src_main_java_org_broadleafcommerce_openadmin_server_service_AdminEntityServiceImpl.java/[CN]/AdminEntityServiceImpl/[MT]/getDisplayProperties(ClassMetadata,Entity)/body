{
  List<Property> returnList=new ArrayList<Property>();
  for (  Property p : metadata.getProperties()) {
    if (p.getMetadata() instanceof BasicFieldMetadata) {
      BasicFieldMetadata md=(BasicFieldMetadata)p.getMetadata();
      Property entityProp=entity.getPMap().get(p.getName());
      entityProp.setMetadata(md);
      returnList.add(entityProp);
    }
  }
  Property[] returnArray=new Property[returnList.size()];
  return returnList.toArray(returnArray);
}
