{
  final Map<String,Entity[]> map=new HashMap<String,Entity[]>();
  final ClassMetadata cmd=getClassMetadata(containingClassName);
  for (  final Property p : cmd.getProperties()) {
    if (p.getMetadata() instanceof CollectionMetadata) {
      try {
        Entity[] rows=getRecordsForCollection(cmd,containingEntityId,p);
        map.put(p.getName(),rows);
      }
 catch (      Exception e) {
        throw new RuntimeException(e);
      }
    }
  }
  return map;
}
