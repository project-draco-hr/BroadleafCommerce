{
  String prefix=storeFrontWebAppPrefix;
  UrlBuilder urlBuilder=new UrlBuilder();
  if (prefix.startsWith("/")) {
    urlBuilder.setHost(com.google.gwt.user.client.Window.Location.getHost());
    urlBuilder.setPort(Integer.valueOf(com.google.gwt.user.client.Window.Location.getPort()));
    urlBuilder.setProtocol(com.google.gwt.user.client.Window.Location.getProtocol());
  }
  urlBuilder.setPath(prefix + (path == null ? "" : path));
  return urlBuilder;
}
