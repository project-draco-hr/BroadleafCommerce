{
synchronized (mutex) {
    Map<K,V> copy=new HashMap<K,V>();
    copy.putAll(map);
    V value=copy.remove(key);
    map=copy;
    return value;
  }
}
