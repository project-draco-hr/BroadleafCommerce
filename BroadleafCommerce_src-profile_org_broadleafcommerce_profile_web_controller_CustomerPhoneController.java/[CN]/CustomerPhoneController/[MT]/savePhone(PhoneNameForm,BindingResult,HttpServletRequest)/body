{
  if (GenericValidator.isBlankOrNull(phoneNameForm.getPhoneName())) {
    ValidationUtils.rejectIfEmptyOrWhitespace(errors,"phoneName","phoneName.required");
  }
  phoneFormatter.formatPhoneNumber(phoneNameForm.getPhone());
  errors.pushNestedPath("phone");
  phoneValidator.validate(phoneNameForm.getPhone(),errors);
  errors.popNestedPath();
  if (!errors.hasErrors()) {
    CustomerPhone customerPhone=(CustomerPhone)entityConfiguration.createEntityInstance("org.broadleafcommerce.profile.domain.CustomerPhone");
    customerPhone.setCustomerId(customerState.getCustomerId(request));
    customerPhone.setPhoneName(phoneNameForm.getPhoneName());
    customerPhone.setPhone(phoneNameForm.getPhone());
    customerPhoneValidator.validate(customerPhone,errors);
    if (!errors.hasErrors()) {
      customerPhoneService.saveCustomerPhone(customerPhone);
      request.setAttribute("customerPhoneId",customerPhone.getId());
    }
    return "success";
  }
 else {
    return "success";
  }
}
