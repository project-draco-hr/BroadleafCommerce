{
  LOG.debug("Processing View Cart!");
  Order cart=retrieveCartOrder(request,model);
  CartSummary cartSummary=new CartSummary();
  for (  OrderItem orderItem : cart.getOrderItems()) {
    CartOrderItem cartOrderItem=new CartOrderItem();
    cartOrderItem.setOrderItem(orderItem);
    cartOrderItem.setQuantity(orderItem.getQuantity());
    cartSummary.getRows().add(cartOrderItem);
  }
  if ((cart.getFulfillmentGroups() != null) && (cart.getFulfillmentGroups().isEmpty() == false)) {
    String cartShippingMethod=cart.getFulfillmentGroups().get(0).getMethod();
    if (cartShippingMethod != null) {
      if (cartShippingMethod.equals("standard")) {
        cartSummary=createFulfillmentGroup(cartSummary,"standard",cart);
      }
 else       if (cartShippingMethod.equals("expedited")) {
        cartSummary=createFulfillmentGroup(cartSummary,"expedited",cart);
      }
    }
  }
  updateFulfillmentGroups(cartSummary,cart);
  model.addAttribute("cartSummary",cartSummary);
  return cartViewRedirect ? "redirect:" + cartView : cartView;
}
