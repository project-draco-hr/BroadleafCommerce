{
  LOG.debug("Processing View Cart!");
  Order cart=retrieveCartOrder(request,model);
  CartSummary cartSummary=new CartSummary();
  FulfillmentGroup standardGroup=fulfillmentGroupService.createEmptyFulfillmentGroup();
  FulfillmentGroup expeditedGroup=fulfillmentGroupService.createEmptyFulfillmentGroup();
  standardGroup.setMethod("standard");
  expeditedGroup.setMethod("expedited");
  standardGroup.setOrder(cart);
  expeditedGroup.setOrder(cart);
  List<FulfillmentGroup> fulfillmentGroups=new ArrayList<FulfillmentGroup>();
  fulfillmentGroups.add(standardGroup);
  fulfillmentGroups.add(expeditedGroup);
  if (cart.getFulfillmentGroups() == null || cart.getFulfillmentGroups().isEmpty()) {
    cart.getFulfillmentGroups().add(standardGroup);
  }
  for (  OrderItem orderItem : cart.getOrderItems()) {
    CartOrderItem cartOrderItem=new CartOrderItem();
    cartOrderItem.setOrderItem(orderItem);
    cartOrderItem.setQuantity(orderItem.getQuantity());
    cartSummary.getRows().add(cartOrderItem);
  }
  cart=cartService.save(cart,true);
  cartSummary.setFulfillmentGroups(fulfillmentGroups);
  model.addAttribute("cartSummary",cartSummary);
  return cartViewRedirect ? "redirect:" + cartView : cartView;
}
