{
  super.setup();
  getPresenterSequenceSetupManager().addOrReplaceItem(new PresenterSetupItem("pageTreeDS",new PagesTreeDataSourceFactory(),null,new Object[]{rootId,rootName},new NullAsyncCallbackAdapter()));
  getPresenterSequenceSetupManager().addOrReplaceItem(new PresenterSetupItem("localeDS",new LocaleListDataSourceFactory(),null,new Object[]{},new AsyncCallbackAdapter(){
    public void onSetupSuccess(    DataSource top){
      setupDisplayItems(getPresenterSequenceSetupManager().getDataSource("pageTreeDS"),top);
      ((TreeGridDataSource)getPresenterSequenceSetupManager().getDataSource("pageTreeDS")).setupGridFields(new String[]{},new Boolean[]{},"250","100");
    }
  }
));
  getPresenterSequenceSetupManager().addOrReplaceItem(new PresenterSetupItem("pageTemplateSearchDS",new PageTemplateSearchListDataSourceFactory(),new OperationTypes(OperationType.ENTITY,OperationType.ENTITY,OperationType.ENTITY,OperationType.ENTITY,OperationType.ENTITY),new Object[]{},new AsyncCallbackAdapter(){
    public void onSetupSuccess(    DataSource result){
      ListGridDataSource pageTemplateDataSource=(ListGridDataSource)result;
      pageTemplateDataSource.resetPermanentFieldVisibility("templateName","templatePath");
      EntitySearchDialog pageTemplateSearchView=new EntitySearchDialog(pageTemplateDataSource,true);
      pageTemplateDialogView=pageTemplateSearchView;
      getPresenterSequenceSetupManager().getDataSource("pageTreeDS").getFormItemCallbackHandlerManager().addSearchFormItemCallback("pageTemplate",pageTemplateSearchView,"Page Template Search",getDisplay().getDynamicFormDisplay(),new FormItemCallback(){
        @Override public void execute(        FormItem formItem){
          if (currentPageRecord != null) {
            destroyTemplateForm();
            loadTemplateForm(currentPageRecord);
          }
        }
      }
);
    }
  }
));
}
