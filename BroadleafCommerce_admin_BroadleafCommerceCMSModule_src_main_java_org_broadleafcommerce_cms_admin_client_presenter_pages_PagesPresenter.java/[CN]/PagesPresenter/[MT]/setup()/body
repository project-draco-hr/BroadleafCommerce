{
  super.setup();
  getPresenterSequenceSetupManager().addOrReplaceItem(new PresenterSetupItem("pageDS",new PageDataSourceFactory(),new AsyncCallbackAdapter(){
    public void onSetupSuccess(    DataSource top){
      setupDisplayItems(top);
      ((ListGridDataSource)top).setupGridFields(new String[]{},new Boolean[]{});
    }
  }
));
  getPresenterSequenceSetupManager().addOrReplaceItem(new PresenterSetupItem("pageTemplateSearchDS",new PageTemplateSearchListDataSourceFactory(),new OperationTypes(OperationType.ENTITY,OperationType.ENTITY,OperationType.ENTITY,OperationType.ENTITY,OperationType.ENTITY),new Object[]{},new AsyncCallbackAdapter(){
    public void onSetupSuccess(    DataSource result){
      ListGridDataSource pageTemplateDataSource=(ListGridDataSource)result;
      pageTemplateDataSource.resetPermanentFieldVisibility("templateName","templatePath");
      EntitySearchDialog pageTemplateSearchView=new EntitySearchDialog(pageTemplateDataSource,true);
      pageTemplateDialogView=pageTemplateSearchView;
      getPresenterSequenceSetupManager().getDataSource("pageDS").getFormItemCallbackHandlerManager().addSearchFormItemCallback("pageTemplate",pageTemplateSearchView,"Page Template Search",getDisplay().getDynamicFormDisplay(),new FormItemCallback(){
        @Override public void execute(        FormItem formItem){
          if (currentPageRecord != null && !BLCMain.ENTITY_ADD.isVisible()) {
            destroyTemplateForm();
            loadTemplateForm(currentPageRecord);
          }
        }
      }
);
    }
  }
));
}
