{
  String pageType=selectedRecord.getAttributeAsStringArray("_type") == null ? null : selectedRecord.getAttributeAsStringArray("_type")[0];
  if (pageType != null && pageType.equals("org.broadleafcommerce.cms.page.domain.PageImpl")) {
    getDisplay().getAddPageButton().disable();
    getDisplay().getAddPageFolderButton().disable();
    if (!selectedRecord.getAttributeAsBoolean("lockedFlag")) {
      getDisplay().getListDisplay().getRemoveButton().enable();
      getDisplay().getDynamicFormDisplay().getFormOnlyDisplay().getForm().enable();
    }
 else {
      getDisplay().getDynamicFormDisplay().getFormOnlyDisplay().getForm().disable();
      getDisplay().getListDisplay().getRemoveButton().disable();
    }
    currentPageRecord=selectedRecord;
    currentPageId=getPresenterSequenceSetupManager().getDataSource("pageTreeDS").getPrimaryKeyValue(currentPageRecord);
    loadTemplateForm(selectedRecord);
  }
 else {
    getDisplay().getAddPageButton().enable();
    getDisplay().getAddPageFolderButton().enable();
    getDisplay().getListDisplay().getRemoveButton().enable();
    destroyTemplateForm();
    getDisplay().getDynamicFormDisplay().getFormOnlyDisplay().getForm().disable();
    currentPageRecord=null;
    currentPageId=null;
  }
  currentFolderRecord=(TreeNode)selectedRecord;
}
