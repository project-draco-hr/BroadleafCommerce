{
  boolean matchFound=true;
  if (itemOffer.getOffer().getQualifyingItemCriteria().isEmpty() && itemOffer.getOffer().getTargetItemCriteria().isEmpty()) {
    return;
  }
  int count=1;
  do {
    boolean qualifiersFound=markQualifiers(itemOffer,order);
    boolean targetsFound=markTargets(itemOffer,order);
    if (qualifiersFound && targetsFound) {
      finalizeQuantities(order.getAllPromotableOrderItemPriceDetails());
    }
 else {
      clearAllNonFinalizedQuantities(order.getAllPromotableOrderItemPriceDetails());
      matchFound=false;
      break;
    }
  }
 while (matchFound);
}
