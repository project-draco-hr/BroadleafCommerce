{
  if (criteriaArray != null) {
    for (int i=0; i <= criteriaArray.size() - 1; i++) {
      JSONObject itemObj=criteriaArray.get(i).isObject();
      if (itemObj != null) {
        JSONValue val=itemObj.get("fieldName");
        if (val == null) {
          JSONArray array=itemObj.get("criteria").isArray();
          buildCriteria(array,cto);
        }
 else {
          FilterAndSortCriteria filterCriteria=cto.get(val.isString().stringValue());
          String[] items=filterCriteria.getFilterValues();
          String[] newItems=new String[items.length + 1];
          int j=0;
          for (          String item : items) {
            newItems[j]=item;
            j++;
          }
          JSONValue value=itemObj.get("value");
          JSONString strVal=value.isString();
          if (strVal != null) {
            newItems[j]=strVal.stringValue();
          }
 else {
            newItems[j]=value.isObject().get("value").isString().stringValue();
          }
          SupportedFieldType fieldType=SupportedFieldType.valueOf(dataSource.getField(val.isString().stringValue()).getAttribute("fieldType"));
          if (fieldType != null) {
switch (fieldType) {
case DECIMAL:
              processFilterValueClause(filterCriteria,newItems[j]);
            break;
case INTEGER:
          processFilterValueClause(filterCriteria,newItems[j]);
        break;
case MONEY:
      processFilterValueClause(filterCriteria,newItems[j]);
    break;
default :
  filterCriteria.setFilterValues(newItems);
break;
}
}
 else {
filterCriteria.setFilterValues(newItems);
}
}
}
}
}
}
