{
  TimeDTO timeDto=SystemTime.asTimeDTO();
  RequestDTO requestDto=(RequestDTO)request.getAttribute(REQUEST_DTO);
  Map<String,Object> mvelParameters=new HashMap<String,Object>();
  mvelParameters.put("time",timeDto);
  mvelParameters.put("request",requestDto);
  mvelParameters.put("MVEL",MVEL.class);
  Map<String,Object> blcRuleMap=(Map<String,Object>)request.getAttribute(BLC_RULE_MAP_PARAM);
  if (blcRuleMap != null) {
    for (    String mapKey : blcRuleMap.keySet()) {
      mvelParameters.put(mapKey,blcRuleMap.get(mapKey));
    }
  }
  if (product != null) {
    mvelParameters.put("product",product);
  }
  return mvelParameters;
}
