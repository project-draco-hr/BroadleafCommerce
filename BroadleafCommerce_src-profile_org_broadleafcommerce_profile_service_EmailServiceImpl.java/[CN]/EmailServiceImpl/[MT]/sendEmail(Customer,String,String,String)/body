{
  try {
    String url="http://localhost:8080";
    Map<String,Object> model=new HashMap<String,Object>();
    model.put("user",customer);
    model.put("from",fromAddress);
    model.put("baseurl",url);
    String body=null;
    try {
      body=VelocityEngineUtils.mergeTemplateIntoString(velocityEngine,template,model);
    }
 catch (    VelocityException e) {
      logger.error(e);
    }
    MimeMessage message=buildMessage(customer,subject,body,fromAddress);
    mailSender.send(message);
  }
 catch (  MessagingException me) {
    logger.error(me);
  }
}
