{
  RelatedProductDTO relatedProductDTO=new RelatedProductDTO();
  String productIdStr=element.getAttributeValue("productId");
  String categoryIdStr=element.getAttributeValue("categoryId");
  String quantityStr=element.getAttributeValue("quantity");
  String typeStr=element.getAttributeValue("type");
  if (productIdStr != null) {
    Object productId=StandardExpressionProcessor.processExpression(args,productIdStr);
    if (productId instanceof BigDecimal) {
      productId=new Long(((BigDecimal)productId).toPlainString());
    }
    relatedProductDTO.setProductId((Long)productId);
  }
  if (categoryIdStr != null) {
    Object categoryId=StandardExpressionProcessor.processExpression(args,categoryIdStr);
    if (categoryId instanceof BigDecimal) {
      categoryId=new Long(((BigDecimal)categoryId).toPlainString());
    }
    relatedProductDTO.setCategoryId((Long)categoryId);
  }
  if (quantityStr != null) {
    relatedProductDTO.setQuantity(((BigDecimal)StandardExpressionProcessor.processExpression(args,quantityStr)).intValue());
  }
  if (typeStr != null && RelatedProductTypeEnum.getInstance(typeStr) != null) {
    relatedProductDTO.setType(RelatedProductTypeEnum.getInstance(typeStr));
  }
  if ("false".equalsIgnoreCase(element.getAttributeValue("cumulativeResults"))) {
    relatedProductDTO.setCumulativeResults(false);
  }
  return relatedProductDTO;
}
