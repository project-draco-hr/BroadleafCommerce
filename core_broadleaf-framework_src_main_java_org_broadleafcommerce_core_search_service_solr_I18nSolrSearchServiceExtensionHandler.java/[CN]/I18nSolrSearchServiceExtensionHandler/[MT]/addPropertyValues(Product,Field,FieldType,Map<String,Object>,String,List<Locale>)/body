{
  Set<String> processedLocaleCodes=new HashSet<String>();
  ExtensionResultStatusType result=ExtensionResultStatusType.NOT_HANDLED;
  if (field.getTranslatable()) {
    result=ExtensionResultStatusType.HANDLED;
    for (    Locale locale : locales) {
      String localeCode=locale.getLocaleCode();
      if (!Boolean.TRUE.equals(locale.getUseCountryInSearchIndex())) {
        int pos=localeCode.indexOf("_");
        if (pos > 0) {
          localeCode=localeCode.substring(0,pos);
          if (processedLocaleCodes.contains(localeCode)) {
            continue;
          }
 else {
            locale=localeService.findLocaleByCode(localeCode);
          }
        }
      }
      processedLocaleCodes.add(localeCode);
      TranslationConsiderationContext.setTranslationConsiderationContext(translationEnabled);
      TranslationConsiderationContext.setTranslationService(translationService);
      BroadleafRequestContext tempContext=BroadleafRequestContext.getBroadleafRequestContext();
      if (tempContext == null) {
        tempContext=new BroadleafRequestContext();
      }
      tempContext.setLocale(locale);
      BroadleafRequestContext.setBroadleafRequestContext(tempContext);
      final Object propertyValue;
      if (propertyName.contains(ATTR_MAP)) {
        propertyValue=PropertyUtils.getMappedProperty(product,ATTR_MAP,propertyName.substring(ATTR_MAP.length() + 1));
      }
 else {
        propertyValue=PropertyUtils.getProperty(product,propertyName);
      }
      values.put(localeCode,propertyValue);
    }
  }
  return result;
}
