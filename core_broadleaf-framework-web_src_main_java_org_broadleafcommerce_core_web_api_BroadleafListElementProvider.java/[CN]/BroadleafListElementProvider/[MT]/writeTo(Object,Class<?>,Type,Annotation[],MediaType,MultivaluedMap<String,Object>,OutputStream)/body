{
  if (jsonListProvider == null) {
    jsonListProvider=new JSONListElementProvider.App(ps);
  }
  if (xmlListProvider == null) {
    xmlListProvider=new XMLListElementProvider.App(xif,ps);
  }
  if (mediaType.isCompatible(MediaType.APPLICATION_JSON_TYPE)) {
    jsonListProvider.writeTo(t,type,genericType,annotations,mediaType,httpHeaders,entityStream);
  }
 else   if (mediaType.isCompatible(MediaType.APPLICATION_XML_TYPE) || mediaType.isCompatible(MediaType.TEXT_XML_TYPE)) {
    xmlListProvider.writeTo(t,type,genericType,annotations,mediaType,httpHeaders,entityStream);
  }
}
