{
  for (  FilterMapping filterMapping : filterMappings) {
    Path explicitPath=null;
    if (filterMapping.getFieldPath() != null) {
      explicitPath=filterMapping.getRestriction().getFieldPathBuilder().getPath(original,filterMapping.getFieldPath());
    }
    if (!filterMapping.getFilterValues().isEmpty() || filterMapping.getFilterValues() instanceof EmptyFilterValues) {
      Predicate predicate=filterMapping.getRestriction().buildRestriction(criteriaBuilder,original,ceilingEntity,filterMapping.getFullPropertyName(),explicitPath,filterMapping.getFilterValues());
      restrictions.add(predicate);
    }
    if (filterMapping.getSortDirection() != null) {
      Path sortPath=explicitPath;
      if (sortPath == null && !StringUtils.isEmpty(filterMapping.getFullPropertyName())) {
        sortPath=filterMapping.getRestriction().getFieldPathBuilder().getPath(original,filterMapping.getFullPropertyName());
      }
      if (sortPath != null) {
        addSorting(criteriaBuilder,sorts,filterMapping,sortPath);
      }
    }
  }
}
