{
  Boolean classAnnotatedPopulateManyToOneFields=null;
  for (int i=entities.length - 1; i >= 0; i--) {
    AdminPresentationClass adminPresentationClass=entities[i].getAnnotation(AdminPresentationClass.class);
    if (adminPresentationClass != null && adminPresentationClass.populateToOneFields() != PopulateToOneFieldsEnum.NOT_SPECIFIED) {
      classAnnotatedPopulateManyToOneFields=adminPresentationClass.populateToOneFields() == PopulateToOneFieldsEnum.TRUE;
      break;
    }
  }
  Map<String,FieldMetadata> mergedProperties=propertyBuilder.execute(classAnnotatedPopulateManyToOneFields);
  for (int i=entities.length - 1; i >= 0; i--) {
    for (    MetadataProvider metadataProvider : metadataProviders) {
      if (metadataProvider.canHandleAnnotationOverride(entities[i])) {
        metadataProvider.overrideViaAnnotation(new OverrideViaAnnotationRequest(entities[i],mergedProperties,isParentExcluded,dynamicEntityDao,prefix));
      }
      defaultMetadataProvider.overrideViaAnnotation(new OverrideViaAnnotationRequest(entities[i],mergedProperties,isParentExcluded,dynamicEntityDao,prefix));
    }
  }
  defaultMetadataProvider.overrideViaXml(new OverrideViaXmlRequest(configurationKey,ceilingEntityFullyQualifiedClassname,prefix,isParentExcluded,mergedProperties,dynamicEntityDao));
  for (  MetadataProvider metadataProvider : metadataProviders) {
    if (metadataProvider.canHandleXmlOverride(ceilingEntityFullyQualifiedClassname,configurationKey)) {
      metadataProvider.overrideViaXml(new OverrideViaXmlRequest(configurationKey,ceilingEntityFullyQualifiedClassname,prefix,isParentExcluded,mergedProperties,dynamicEntityDao));
    }
  }
  return mergedProperties;
}
