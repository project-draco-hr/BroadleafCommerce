{
  Map<String,FieldMetadata> attributes=new HashMap<String,FieldMetadata>();
  Field[] fields=dynamicEntityDao.getAllFields(targetClass);
  for (  Field field : fields) {
    boolean foundOneOrMoreHandlers=false;
    for (    MetadataProvider metadataProvider : metadataProviders) {
      if (metadataProvider.canHandleField(field)) {
        metadataProvider.addMetadata(new AddMetadataRequest(field,parentClass,targetClass,attributes,dynamicEntityDao,prefix));
        if (!foundOneOrMoreHandlers) {
          foundOneOrMoreHandlers=true;
        }
      }
    }
    if (!foundOneOrMoreHandlers) {
      defaultMetadataProvider.addMetadata(new AddMetadataRequest(field,parentClass,targetClass,attributes,dynamicEntityDao,prefix));
    }
  }
  return attributes;
}
