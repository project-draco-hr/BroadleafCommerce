{
  Main.NON_MODAL_PROGRESS.startProgress();
  JavaScriptObject data=request.getData();
  TreeNode record=new TreeNode(data);
  Entity entity=buildEntity(record);
  service.add(entity,foreignFields,additionalNonPersistentProperties,new EntityServiceAsyncCallback<Entity>(EntityOperationType.ADD,requestId,request,response){
    public void onSuccess(    Entity result){
      super.onSuccess(result);
      TreeNode record=buildRecord(result);
      TreeNode[] recordList=new TreeNode[]{record};
      response.setData(recordList);
      processResponse(requestId,response);
    }
  }
);
}
