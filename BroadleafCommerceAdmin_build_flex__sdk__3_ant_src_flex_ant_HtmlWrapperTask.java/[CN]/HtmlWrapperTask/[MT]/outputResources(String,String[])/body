{
  BufferedReader bufferedReader=null;
  PrintWriter printWriter=null;
  for (int i=0; i < resources.length; i++) {
    try {
      InputStream inputStream=getClass().getResourceAsStream(resourceDir + resources[i]);
      bufferedReader=new BufferedReader(new InputStreamReader(inputStream));
      String path=null;
      if (output != null) {
        File outputDir=new File(output);
        if (outputDir.exists() && outputDir.isDirectory()) {
          path=output + File.separatorChar + resources[i];
        }
 else {
          String base=getProject().getBaseDir().getAbsolutePath();
          outputDir=new File(base + File.separatorChar + output);
          if (outputDir.exists() && outputDir.isDirectory()) {
            path=base + File.separatorChar + output+ File.separatorChar+ resources[i];
          }
 else {
            throw new BuildException("output directory does not exist: " + output);
          }
        }
      }
 else {
        path=resources[i];
      }
      File file=new File(path);
      file.getParentFile().mkdirs();
      printWriter=new PrintWriter(new FileWriter(file));
      String line;
      while ((line=bufferedReader.readLine()) != null) {
        printWriter.println(line);
      }
    }
 catch (    IOException ioException) {
      System.err.println("Error outputting resource: " + resources[i]);
      ioException.printStackTrace();
    }
 finally {
      try {
        bufferedReader.close();
        printWriter.close();
      }
 catch (      Exception exception) {
      }
    }
  }
}
