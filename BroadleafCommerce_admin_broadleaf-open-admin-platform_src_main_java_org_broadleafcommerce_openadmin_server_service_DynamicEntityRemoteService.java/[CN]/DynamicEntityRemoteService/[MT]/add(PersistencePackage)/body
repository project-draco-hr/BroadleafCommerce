{
  cleanEntity(persistencePackage.getEntity());
  PersistenceManager persistenceManager=null;
  try {
    persistenceManager=(PersistenceManager)applicationContext.getBean(persistenceManagerRef);
    persistenceManager.setTargetMode(TargetModeType.SANDBOX);
    return persistenceManager.add(persistencePackage);
  }
  finally {
    try {
      if (persistenceManager != null) {
        persistenceManager.close();
      }
    }
 catch (    Exception e) {
      LOG.error("Unable to close persistence manager",e);
    }
  }
}
