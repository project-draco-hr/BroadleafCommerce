{
  PersistenceUnitInfo pui=persistenceUnitManager.obtainPersistenceUnitInfo(getClonePersistenceUnitName());
  MutablePersistenceUnitInfo temp;
  if (pui != null && Proxy.isProxyClass(pui.getClass())) {
    Jpa2PersistenceUnitInfoDecorator dec=(Jpa2PersistenceUnitInfoDecorator)Proxy.getInvocationHandler(pui);
    temp=(MutablePersistenceUnitInfo)dec.getTarget();
  }
 else {
    temp=(MutablePersistenceUnitInfo)pui;
  }
  temp.setJtaDataSource(null);
  temp.setNonJtaDataSource(getDataSource());
  if (temp.getProperties() != null) {
    Properties props=temp.getProperties();
    if (props != null) {
      temp.getProperties().remove("hibernate.hbm2ddl.import_files");
      checkProps: {
        for (        Object key : props.keySet()) {
          if (key.equals("hibernate.hbm2ddl.auto")) {
            temp.getProperties().setProperty((String)key,"create");
            break checkProps;
          }
        }
        temp.getProperties().setProperty("hibernate.hbm2ddl.auto","create");
      }
    }
  }
  return pui;
}
