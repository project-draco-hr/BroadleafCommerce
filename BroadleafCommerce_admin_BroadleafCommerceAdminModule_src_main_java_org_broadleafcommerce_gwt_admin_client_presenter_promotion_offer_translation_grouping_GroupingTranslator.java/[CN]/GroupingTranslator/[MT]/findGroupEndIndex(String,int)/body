{
  int subgroupEndIndex=subgroupStartIndex;
  boolean eol=false;
  while (!eol) {
    subgroupEndIndex=segment.indexOf(GROUPENDCHAR,subgroupStartIndex);
    if (subgroupEndIndex < 0) {
      throw new IncompatibleMVELTranslationException("Unable to find an end parenthesis for the group started at (" + segment.substring(subgroupStartIndex) + ")");
    }
 else {
      subgroupStartIndex=segment.indexOf(GROUPSTARTCHAR,subgroupStartIndex + 1);
      if (subgroupStartIndex < 0 || subgroupStartIndex > subgroupEndIndex) {
        eol=true;
      }
 else {
        subgroupStartIndex=subgroupEndIndex + 1;
      }
    }
  }
  return subgroupEndIndex + 1;
}
