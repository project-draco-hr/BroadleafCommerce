{
  String cacheFilePath=(String)model.get("cacheFilePath");
  BufferedInputStream bis=new BufferedInputStream(new FileInputStream(cacheFilePath));
  try {
    String mimeType=(String)model.get("mimeType");
    response.setContentType(mimeType);
    if (!browserAssetCachingEnabled) {
      response.setHeader("Cache-Control","no-cache");
      response.setHeader("Pragma","no-cache");
      response.setDateHeader("Expires",0);
    }
    OutputStream os=response.getOutputStream();
    boolean eof=false;
    while (!eof) {
      int temp=bis.read();
      if (temp < 0) {
        eof=true;
      }
 else {
        os.write(temp);
      }
    }
    os.flush();
  }
 catch (  Exception e) {
    if (e.getCause() instanceof SocketException) {
      if (LOG.isDebugEnabled()) {
        LOG.debug("Unable to stream asset",e);
      }
    }
 else {
      LOG.error("Unable to stream asset",e);
      throw e;
    }
  }
 finally {
    try {
      bis.close();
    }
 catch (    Throwable e) {
    }
  }
}
