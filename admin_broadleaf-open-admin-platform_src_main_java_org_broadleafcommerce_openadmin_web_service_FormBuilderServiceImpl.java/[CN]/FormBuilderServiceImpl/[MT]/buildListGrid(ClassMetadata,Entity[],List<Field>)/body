{
  ListGrid lg=new ListGrid();
  lg.setClassName(cmd.getCeilingType());
  lg.setHeaderFields(headerFields);
  for (  Entity e : entities) {
    ListGridRecord record=new ListGridRecord();
    record.setId(e.findProperty("id").getValue());
    for (    Field headerField : headerFields) {
      Property p=e.findProperty(headerField.getName());
      Field recordField=new Field().withName(headerField.getName()).withValue(p.getValue());
      record.getFields().add(recordField);
    }
    lg.getRecords().add(record);
  }
  return lg;
}
