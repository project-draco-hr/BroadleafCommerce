{
  for (  final Property p : cmd.getProperties()) {
    if (p.getMetadata() instanceof BasicFieldMetadata) {
      BasicFieldMetadata fmd=(BasicFieldMetadata)p.getMetadata();
      String fieldType=fmd.getFieldType() == null ? null : fmd.getFieldType().toString();
      Field f=new Field().withName(p.getName()).withFieldType(fieldType).withFriendlyName(p.getMetadata().getFriendlyName()).withForeignKeyDisplayValueProperty(fmd.getForeignKeyDisplayValueProperty());
      if (StringUtils.isBlank(f.getFriendlyName())) {
        f.setFriendlyName(f.getName());
      }
      ef.addField(f,fmd.getGroup());
    }
  }
}
