{
  List<Field> headerFields=new ArrayList<Field>();
  ListGrid.Type type=ListGrid.Type.MAIN;
  for (  Property p : cmd.getProperties()) {
    if (p.getMetadata() instanceof BasicFieldMetadata) {
      BasicFieldMetadata fmd=(BasicFieldMetadata)p.getMetadata();
      if (fmd.isProminent() != null && fmd.isProminent()) {
        Field hf;
        if (fmd.getFieldType().equals(SupportedFieldType.EXPLICIT_ENUMERATION) || fmd.getFieldType().equals(SupportedFieldType.BROADLEAF_ENUMERATION)) {
          hf=new ComboField();
          ((ComboField)hf).setOptions(fmd.getEnumerationValues());
        }
 else {
          hf=new Field();
        }
        hf.withName(p.getName()).withFriendlyName(fmd.getFriendlyName()).withOrder(fmd.getGridOrder()).withForeignKeyDisplayValueProperty(fmd.getForeignKeyDisplayValueProperty());
        String fieldType=fmd.getFieldType() == null ? null : fmd.getFieldType().toString();
        hf.setFieldType(fieldType);
        headerFields.add(hf);
      }
    }
  }
  return createListGrid(cmd.getCeilingType(),headerFields,type,entities,sectionKey);
}
