{
  List<Field> headerFields=new ArrayList<Field>();
  ListGrid.Type type=ListGrid.Type.MAIN;
  String idProperty="id";
  for (  Property p : cmd.getProperties()) {
    if (p.getMetadata() instanceof BasicFieldMetadata) {
      BasicFieldMetadata fmd=(BasicFieldMetadata)p.getMetadata();
      if (SupportedFieldType.ID.equals(fmd.getFieldType())) {
        idProperty=fmd.getName();
      }
      if (fmd.isProminent() != null && fmd.isProminent() && !ArrayUtils.contains(getGridHiddenVisibilities(),fmd.getVisibility())) {
        Field hf=createHeaderField(p,fmd);
        headerFields.add(hf);
      }
    }
  }
  ListGrid listGrid=createListGrid(cmd.getCeilingType(),headerFields,type,drs,sectionKey,0,idProperty);
  listGrid.getHeaderFields().iterator().next().setMainEntityLink(true);
  return listGrid;
}
