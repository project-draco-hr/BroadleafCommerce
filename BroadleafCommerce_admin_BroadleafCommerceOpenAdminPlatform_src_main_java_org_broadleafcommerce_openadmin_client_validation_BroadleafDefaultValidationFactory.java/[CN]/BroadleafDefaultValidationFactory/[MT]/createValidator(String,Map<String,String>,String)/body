{
  Object response=factory.newInstance(validatorClassname);
  if (response == null) {
    throw new RuntimeException("Unable to instantiate the item from the Factory using classname: (" + validatorClassname + "). Are you sure this classname is correct?");
  }
  Validator valid=(Validator)response;
  if (configurationItems.containsKey("regularExpression")) {
    ((RegExpValidator)valid).setExpression(configurationItems.get("regularExpression"));
  }
  if (configurationItems.containsKey("errorMessageKey")) {
    String message=null;
    try {
      message=BLCMain.getMessageManager().getString(configurationItems.get("errorMessageKey"));
    }
 catch (    MissingResourceException e) {
    }
    if (message != null) {
      ((RegExpValidator)valid).setErrorMessage(message);
    }
  }
 else   if (configurationItems.containsKey("errorMessage")) {
    ((RegExpValidator)valid).setErrorMessage(configurationItems.get("errorMessage"));
  }
  return valid;
}
