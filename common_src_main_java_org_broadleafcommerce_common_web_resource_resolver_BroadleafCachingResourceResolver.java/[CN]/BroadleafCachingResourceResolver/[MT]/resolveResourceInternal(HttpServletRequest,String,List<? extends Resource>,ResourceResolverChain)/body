{
  if (resourceCachingEnabled) {
    if (cacheNullResources) {
      String key=RESOLVED_RESOURCE_CACHE_KEY_PREFIX_NULL + requestPath;
      Object nullResource=getCache().get(key,Object.class);
      if (nullResource != null) {
        if (logger.isTraceEnabled()) {
          logger.trace(String.format("Found null reference resource match for '%s'",requestPath));
        }
        return null;
      }
 else {
        Resource response=super.resolveResourceInternal(request,requestPath,locations,chain);
        if (response == null) {
          if (logger.isTraceEnabled()) {
            logger.trace(String.format("Putting resolved null reference resource in cache for '%s'",requestPath));
          }
          getCache().put(key,NULL_REFERENCE);
        }
        return response;
      }
    }
 else {
      return super.resolveResourceInternal(request,requestPath,locations,chain);
    }
  }
 else {
    return chain.resolveResource(request,requestPath,locations);
  }
}
