{
  BasketOrder bo;
  Query query=em.createQuery("SELECT basketOrder FROM org.broadleafcommerce.order.domain.BasketOrder basketOrder WHERE basketOrder.user.id = :userId");
  query.setParameter("userId",user.getId());
  try {
    bo=(BasketOrder)query.getSingleResult();
    return (BasketOrder)query.getSingleResult();
  }
 catch (  NoResultException nre) {
    bo=new BasketOrder();
    bo.setUser(user);
    em.persist(bo);
    return bo;
  }
}
