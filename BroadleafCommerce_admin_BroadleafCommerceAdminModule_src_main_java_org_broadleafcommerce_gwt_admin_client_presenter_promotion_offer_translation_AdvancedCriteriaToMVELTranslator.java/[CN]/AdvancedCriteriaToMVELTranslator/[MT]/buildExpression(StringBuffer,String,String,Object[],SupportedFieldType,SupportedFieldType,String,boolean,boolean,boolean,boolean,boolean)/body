{
  if (operator.equals("==") && !isFieldComparison && value.length > 1) {
    sb.append("(");
    sb.append(formatField(entityKey,type,field,ignoreCase,isNegation));
    if (ignoreCase) {
      sb.append(" toUpperCase()");
    }
    sb.append(" in [");
    sb.append(formatValue(field,entityKey,type,secondaryType,value,isFieldComparison,ignoreCase,ignoreQuotes));
    sb.append("])");
  }
 else {
    sb.append(formatField(entityKey,type,field,ignoreCase,isNegation));
    sb.append(operator);
    if (includeParenthesis) {
      sb.append("(");
    }
    sb.append(formatValue(field,entityKey,type,secondaryType,value,isFieldComparison,ignoreCase,ignoreQuotes));
    if (includeParenthesis) {
      sb.append(")");
    }
  }
}
