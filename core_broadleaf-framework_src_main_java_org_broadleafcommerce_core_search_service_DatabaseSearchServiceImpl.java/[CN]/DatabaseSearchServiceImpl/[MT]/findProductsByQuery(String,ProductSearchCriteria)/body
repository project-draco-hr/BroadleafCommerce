{
  ProductSearchResult result=new ProductSearchResult();
  setQualifiedKeys(searchCriteria);
  List<Product> products=catalogService.findFilteredActiveProductsByQuery(query,SystemTime.asDate(),searchCriteria);
  List<SearchFacetDTO> facets=getSearchFacets();
  result.setProducts(products);
  result.setFacets(facets);
  result.setTotalResults(products.size());
  result.setPage(1);
  result.setPageSize(products.size());
  return result;
}
