{
  String[] configLocations=getConfigLocations();
  if (configLocations != null) {
    InputStream[] sources=new InputStream[configLocations.length];
    for (int i=0; i < configLocations.length; i++) {
      Resource resource=getResourceByPath(configLocations[i]);
      sources[i]=resource.getInputStream();
    }
    String patchLocation=getPatchLocation();
    String[] patchLocations=StringUtils.tokenizeToStringArray(patchLocation,CONFIG_LOCATION_DELIMITERS);
    InputStream[] patches=new InputStream[patchLocations.length];
    for (int i=0; i < patchLocations.length; i++) {
      Resource resource=getResourceByPath(patchLocations[i]);
      patches[i]=resource.getInputStream();
    }
    Resource[] resources=new MergeApplicationContextXmlConfigResource().getConfigResources(sources,patches);
    reader.loadBeanDefinitions(resources);
  }
}
