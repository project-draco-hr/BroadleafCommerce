{
  Source xmlSource;
  Writer resultWriter=new StringWriter();
  StreamResult result=new StreamResult(resultWriter);
  Source styleSheetSource=getSource(styleSheetString);
  TransformerFactory transformerFactory=TransformerFactory.newInstance();
  Transformer transformer=transformerFactory.newTransformer(styleSheetSource);
  for (  ContentDetails contentDetail : contentDetails) {
    xmlSource=getSource(contentDetail.getXmlContent());
    try {
      transformer.transform(xmlSource,result);
    }
 catch (    Exception e) {
      LOG.error("Error during transformation. ",e);
      throw e;
    }
  }
  return StringEscapeUtils.unescapeXml(resultWriter.toString());
}
