{
  Source xmlSource;
  int maxCount=(rowCount > -1 && contentList.size() > 0) ? rowCount : contentList.size();
  Writer resultWriter=new StringWriter();
  StreamResult result=new StreamResult(resultWriter);
  Source styleSheetSource=getSource(styleSheetString);
  TransformerFactory transformerFactory=TransformerFactory.newInstance();
  Transformer transformer=transformerFactory.newTransformer(styleSheetSource);
  Comparator<Content> cntntCompare=new ContentComparator();
  Collections.sort(contentList,cntntCompare);
  for (int i=0; i < maxCount; i++) {
    ContentDetails contentDetail=findContentDetailsById(contentList.get(i).getId());
    xmlSource=getSource(contentDetail.getXmlContent());
    try {
      transformer.transform(xmlSource,result);
    }
 catch (    Exception e) {
      LOG.error("Error during transformation. ",e);
      throw e;
    }
  }
  return StringEscapeUtils.unescapeXml(resultWriter.toString());
}
