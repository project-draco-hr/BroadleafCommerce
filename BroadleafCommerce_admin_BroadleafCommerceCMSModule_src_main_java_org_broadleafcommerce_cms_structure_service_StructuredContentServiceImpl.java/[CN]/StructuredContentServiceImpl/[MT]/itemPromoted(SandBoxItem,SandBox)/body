{
  if (!SandBoxItemType.STRUCTURED_CONTENT.equals(sandBoxItem.getSandBoxItemType())) {
    return;
  }
  StructuredContent sc=structuredContentDao.findStructuredContentById(sandBoxItem.getTemporaryItemId());
  if (sc == null) {
    if (LOG.isDebugEnabled()) {
      LOG.debug("Structured Content Item not found " + sandBoxItem.getTemporaryItemId());
    }
  }
 else {
    boolean productionSandBox=isProductionSandBox(destinationSandBox);
    if (productionSandBox) {
      sc.setLockedFlag(false);
    }
 else {
      sc.setLockedFlag(true);
    }
    if (productionSandBox && sc.getOriginalItemId() != null) {
      if (LOG.isDebugEnabled()) {
        LOG.debug("Structured content promoted to production.  " + sc.getId() + ".  Archiving original item "+ sc.getOriginalItemId());
      }
      StructuredContent originalSC=structuredContentDao.findStructuredContentById(sandBoxItem.getOriginalItemId());
      originalSC.setArchivedFlag(Boolean.TRUE);
      structuredContentDao.addOrUpdateContentItem(originalSC);
      if (sc.getDeletedFlag()) {
        sc.setArchivedFlag(true);
      }
      sc.setOriginalItemId(null);
    }
  }
  if (sc.getOriginalSandBox() == null) {
    sc.setOriginalSandBox(sc.getSandbox());
  }
  sc.setSandbox(destinationSandBox);
  structuredContentDao.addOrUpdateContentItem(sc);
}
