{
  FieldMetadata fieldMetadata=new FieldMetadata();
  fieldMetadata.setFieldType(type);
  if (entityType != null && !entityType.isCollectionType()) {
    Column column=(Column)persistentClass.getProperty(propertyName).getColumnIterator().next();
    fieldMetadata.setLength(column.getLength());
    fieldMetadata.setScale(column.getScale());
    fieldMetadata.setPrecision(column.getPrecision());
    fieldMetadata.setRequired(!column.isNullable());
    fieldMetadata.setUnique(column.isUnique());
    fieldMetadata.setCollection(false);
  }
 else {
    fieldMetadata.setCollection(true);
  }
  fieldMetadata.setMutable(true);
  fieldMetadata.setInheritedFromType(targetClass.getName());
  fieldMetadata.setAvailableToTypes(targetClass.getName());
  fieldMetadata.setPresentationAttributes(presentationAttribute);
  return fieldMetadata;
}
