{
  Map<String,String> attributeValuesForSku=new HashMap<String,String>();
  if (product != null && product.getProductOptions() != null && product.getProductOptions().size() > 0) {
    for (    ProductOption productOption : product.getProductOptions()) {
      if (productOption.getRequired()) {
        if (attributeValues.get(productOption.getAttributeName()) == null) {
          throw new IllegalArgumentException("Unable to add to cart.   Not all required options were provided.");
        }
 else {
          attributeValuesForSku.put(productOption.getAttributeName(),attributeValues.get(productOption.getAttributeName()));
        }
      }
    }
    if (product != null && product.getSkus() != null) {
      for (      Sku sku : product.getSkus()) {
        if (checkSkuForMatch(sku,attributeValuesForSku)) {
          return sku;
        }
      }
    }
  }
  return null;
}
