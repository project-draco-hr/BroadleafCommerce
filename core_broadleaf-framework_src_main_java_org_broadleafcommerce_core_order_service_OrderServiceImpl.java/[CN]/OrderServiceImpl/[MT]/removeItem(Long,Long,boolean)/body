{
  preValidateCartOperation(findOrderById(orderId));
  try {
    OrderItem oi=orderItemService.readOrderItemById(orderItemId);
    if (oi == null) {
      throw new WorkflowException(new ItemNotFoundException());
    }
    if (CollectionUtils.isNotEmpty(oi.getChildOrderItems())) {
      List<Long> childrenToRemove=new ArrayList<Long>();
      for (      OrderItem childOrderItem : oi.getChildOrderItems()) {
        childrenToRemove.add(childOrderItem.getId());
      }
      for (      Long childToRemove : childrenToRemove) {
        removeItemInternal(orderId,childToRemove,false);
      }
    }
    return removeItemInternal(orderId,orderItemId,priceOrder);
  }
 catch (  WorkflowException e) {
    throw new RemoveFromCartException("Could not remove from cart",getCartOperationExceptionRootCause(e));
  }
}
