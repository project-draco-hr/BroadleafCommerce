{
  List<Class<?>> entities=new ArrayList<Class<?>>();
  for (  Object item : sessionFactory.getAllClassMetadata().values()) {
    ClassMetadata metadata=(ClassMetadata)item;
    Class<?> mappedClass=metadata.getMappedClass(EntityMode.POJO);
    if (mappedClass != null && ceilingClass.isAssignableFrom(mappedClass)) {
      entities.add(mappedClass);
    }
  }
  return entities;
}
