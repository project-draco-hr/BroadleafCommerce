{
  EmailTarget emailUser=(EmailTarget)props.get("user");
  EmailInfo info=(EmailInfo)props.get("info");
  Long emailId=emailTrackingManager.createTrackedEmail(emailUser.getEmailAddress(),info.getEmailType(),null);
  props.put("emailTrackingId",emailId);
  if (Boolean.parseBoolean(info.getSendEmailReliableAsync())) {
    emailServiceProducer.send(props);
  }
 else {
    messageCreator.sendMessage(props);
  }
  return true;
}
