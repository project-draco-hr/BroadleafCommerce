{
  if (type.equals("ORDER_ITEM")) {
    Integer quantity=(Integer)getDisplay().getTargetItemBuilder().getItemQuantity().getValue();
    String mvel;
    if (getDisplay().getTargetItemBuilder().getIncompatibleMVEL()) {
      mvel=getDisplay().getTargetItemBuilder().getRawItemTextArea().getValueAsString();
    }
 else {
      mvel=TRANSLATOR.createMVEL(getDisplay().getTargetItemBuilder().getItemFilterBuilder().getCriteria(),FilterType.ORDER_ITEM,getDisplay().getTargetItemBuilder().getItemFilterBuilder().getDataSource());
    }
    selectedRecord.setAttribute("targetItemCriteria.receiveQuantity",quantity);
    selectedRecord.setAttribute("targetItemCriteria.orderItemMatchRule",mvel);
  }
 else {
    selectedRecord.setAttribute("targetItemCriteria",0);
    selectedRecord.setAttribute("targetItemCriteria.orderItemMatchRule","");
  }
}
