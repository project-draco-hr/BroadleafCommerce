{
  CatalogService catalogService=ProcessorUtils.getCatalogService(arguments);
  String resultVar=element.getAttributeValue("resultVar");
  String parentCategory=element.getAttributeValue("parentCategory");
  String unparsedMaxResults=element.getAttributeValue("maxResults");
  List<Category> categories=catalogService.findCategoriesByName(parentCategory);
  if (categories != null && categories.size() > 0) {
    List<CategoryXref> subcategories=categories.get(0).getChildCategories();
    if (subcategories != null && !subcategories.isEmpty()) {
      if (StringUtils.isNotEmpty(unparsedMaxResults)) {
        int maxResults=Integer.parseInt(unparsedMaxResults);
        if (subcategories.size() > maxResults) {
          subcategories=subcategories.subList(0,maxResults);
        }
      }
    }
    addToModel(arguments,resultVar,subcategories);
  }
}
