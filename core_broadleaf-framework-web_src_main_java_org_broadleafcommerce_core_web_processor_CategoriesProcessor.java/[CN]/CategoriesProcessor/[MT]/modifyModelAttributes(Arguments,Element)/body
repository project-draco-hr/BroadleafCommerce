{
  String resultVar=element.getAttributeValue("resultVar");
  String parentCategory=element.getAttributeValue("parentCategory");
  String unparsedMaxResults=element.getAttributeValue("maxResults");
  List<Category> categories=catalogService.findCategoriesByName(parentCategory);
  if (categories != null && categories.size() > 0) {
    List<CategoryXref> subcategories=categories.get(0).getChildCategoryXrefs();
    if (subcategories != null && !subcategories.isEmpty()) {
      if (StringUtils.isNotEmpty(unparsedMaxResults)) {
        int maxResults=Integer.parseInt(unparsedMaxResults);
        if (subcategories.size() > maxResults) {
          subcategories=subcategories.subList(0,maxResults);
        }
      }
      List<Category> results=new ArrayList<Category>(subcategories.size());
      for (      CategoryXref xref : subcategories) {
        results.add(xref.getSubCategory());
      }
      addToModel(arguments,resultVar,results);
    }
  }
}
