{
  Order cart=CartState.getCart();
  if (cart != null) {
    Map<OrderPayment,Referenced> payments=new HashMap<OrderPayment,Referenced>();
    OrderPayment paymentInfo=mapWrapper.getPaymentInfoWrapper().unwrap(request,context);
    Referenced referenced=mapWrapper.getReferencedWrapper().unwrap(request,context);
    payments.put(paymentInfo,referenced);
    PaymentResponseItem responseItem=new PaymentResponseItemImpl();
    PaymentResponseItemWrapper paymentResponseItemWrapper=context.getBean(PaymentResponseItemWrapper.class);
    paymentResponseItemWrapper.wrapDetails(responseItem,request);
    return paymentResponseItemWrapper;
  }
  throw BroadleafWebServicesException.build(Response.Status.NOT_FOUND.getStatusCode()).addMessage(BroadleafWebServicesException.CART_NOT_FOUND);
}
