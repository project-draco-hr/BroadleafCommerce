{
  if (!(seedObject instanceof PaymentContextSeed)) {
    LOG.error("STOPPING Workflow Process, seed data instance is incorrect. " + "Required class is " + PaymentContextSeed.class.getName() + " "+ "but found class: "+ seedObject.getClass().getName());
    setStopEntireProcess(true);
    return;
  }
  PaymentContextSeed temp=(PaymentContextSeed)seedObject;
  Map<PaymentInfo,Referenced> secureMap=new HashMap<PaymentInfo,Referenced>();
  Iterator<PaymentInfo> infos=temp.getInfos().iterator();
  while (infos.hasNext()) {
    PaymentInfo info=infos.next();
    if (info.getType() == PaymentInfoType.CREDIT_CARD) {
      CreditCardPaymentInfo ccinfo=securePaymentInfoDao.findCreditCardInfo(info.getReferenceNumber());
      if (ccinfo == null) {
        LOG.error("STOPPING Workflow Process, no credit card info associated with credit card payment type with reference number: " + info.getReferenceNumber());
        setStopEntireProcess(true);
        break;
      }
      secureMap.put(info,ccinfo);
    }
 else     if (info.getType() == PaymentInfoType.BANK_ACCOUNT) {
      BankAccountPaymentInfo bankinfo=securePaymentInfoDao.findBankAccountInfo(info.getReferenceNumber());
      if (bankinfo == null) {
        LOG.error("STOPPING Workflow Process, no bank account info associated with bank account payment type with reference number: " + info.getReferenceNumber());
        setStopEntireProcess(true);
        break;
      }
      secureMap.put(info,bankinfo);
    }
 else     if (info.getType() == PaymentInfoType.GIFT_CARD) {
      secureMap.put(info,null);
    }
 else {
      LOG.error("STOPPING Workflow Process, payment info type ['" + info.getType() + "'] not recognized with reference number: "+ info.getReferenceNumber());
      setStopEntireProcess(true);
      break;
    }
  }
  seedData=new CombinedPaymentContextSeed(secureMap,temp.getActionType());
}
