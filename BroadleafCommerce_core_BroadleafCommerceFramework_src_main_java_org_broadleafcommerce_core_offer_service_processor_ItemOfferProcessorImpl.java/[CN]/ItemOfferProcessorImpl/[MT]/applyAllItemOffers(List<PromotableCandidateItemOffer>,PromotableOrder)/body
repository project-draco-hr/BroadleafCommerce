{
  boolean itemOffersApplied=false;
  int appliedItemOffersCount=0;
  boolean isLegacyFormat=false;
  for (  PromotableCandidateItemOffer itemOffer : itemOffers) {
    int beforeCount=appliedItemOffersCount;
    PromotableOrderItem orderItem=itemOffer.getOrderItem();
    if (orderItem != null) {
      isLegacyFormat=true;
      appliedItemOffersCount=applyLegacyAdjustments(appliedItemOffersCount,itemOffer,beforeCount,orderItem);
    }
 else {
      appliedItemOffersCount=applyAdjustments(order,appliedItemOffersCount,itemOffer,beforeCount);
    }
  }
  if (isLegacyFormat) {
    appliedItemOffersCount=checkLegacyAdjustments(order.getDiscountableDiscreteOrderItems(),appliedItemOffersCount);
  }
 else {
    appliedItemOffersCount=checkAdjustments(order,appliedItemOffersCount);
  }
  if (appliedItemOffersCount > 0) {
    itemOffersApplied=true;
  }
  return itemOffersApplied;
}
