{
  if (refineType.isAssignableFrom(e.getClass())) {
    return wrapException(e,wrapType);
  }
  Throwable rootCause=e;
  boolean eof=false;
  while (!eof) {
    if (rootCause.getCause() != null) {
      rootCause=rootCause.getCause();
      if (refineType.isAssignableFrom(rootCause.getClass())) {
        return wrapException(e,wrapType);
      }
    }
 else {
      eof=true;
    }
  }
  return wrapException(e,wrapType);
}
