{
  PersistencePerspective persistencePerspective=collectionMetadata.getPersistencePerspective();
  List<DataSourceModule> dataSourceModuleList=new ArrayList<DataSourceModule>();
  dataSourceModuleList.add(new BasicClientEntityModule(collectionMetadata.getCollectionCeilingEntity(),persistencePerspective,AppServices.DYNAMIC_ENTITY));
  if (persistencePerspective.getPersistencePerspectiveItems().containsKey(PersistencePerspectiveItemType.ADORNEDTARGETLIST)) {
    dataSourceModuleList.add(new AdornedTargetListClientModule(collectionMetadata.getCollectionCeilingEntity(),persistencePerspective,AppServices.DYNAMIC_ENTITY));
  }
  if (persistencePerspective.getPersistencePerspectiveItems().containsKey(PersistencePerspectiveItemType.MAPSTRUCTURE)) {
  }
  DataSourceModule[] modules=new DataSourceModule[dataSourceModuleList.size()];
  modules=dataSourceModuleList.toArray(modules);
  ListGridDataSource dataSource=new ListGridDataSource(name,persistencePerspective,AppServices.DYNAMIC_ENTITY,modules);
  dataSource.buildFields(null,false,cb);
}
