{
  Money calculatedSubTotal=new Money();
  for (  OrderItem orderItem : orderItems) {
    Money price;
    if (includeNonTaxableItems) {
      price=orderItem.getPrice();
    }
 else {
      price=orderItem.getTaxablePrice();
    }
    calculatedSubTotal=calculatedSubTotal.add(price.multiply(orderItem.getQuantity()));
  }
  return calculatedSubTotal;
}
