{
  String specificPropertyKey=property + "_" + localeCountryCode;
  String generalPropertyKey=property + "_" + localeCode;
  String cacheKey=getCacheKey(entity,ResultType.STANDARD,entityType);
  Element cacheResult=getCache().get(cacheKey);
  String response=null;
  if (cacheResult == null) {
    statisticsService.addCacheStat(CacheStatType.TRANSLATION_CACHE_HIT_RATE.toString(),false);
    if (dao.countTranslationEntries(entityType,ResultType.STANDARD_CACHE) < getThresholdForFullCache()) {
      Map<String,Map<String,StandardCacheItem>> propertyTranslationMap=new HashMap<String,Map<String,StandardCacheItem>>();
      List<StandardCacheItem> convertedList=dao.readConvertedTranslationEntries(entityType,ResultType.STANDARD_CACHE);
      if (!CollectionUtils.isEmpty(convertedList)) {
        for (        StandardCacheItem standardCache : convertedList) {
          Translation translation=(Translation)standardCache.getCacheItem();
          String key=translation.getFieldName() + "_" + translation.getLocaleCode();
          if (!propertyTranslationMap.containsKey(key)) {
            propertyTranslationMap.put(key,new HashMap<String,StandardCacheItem>());
          }
          propertyTranslationMap.get(key).put(translation.getEntityId(),standardCache);
        }
      }
      getCache().put(new Element(cacheKey,propertyTranslationMap));
      Translation bestTranslation=findBestStandardTranslation(specificPropertyKey,generalPropertyKey,propertyTranslationMap,entityId);
      if (bestTranslation != null) {
        response=bestTranslation.getTranslatedValue();
      }
 else {
        response=getTemplateTranslatedValue(cacheKey,entity,property,entityType,entityId,localeCode,localeCountryCode,specificPropertyKey,generalPropertyKey);
      }
    }
 else {
      Translation translation=dao.readTranslation(entityType,entityId,property,localeCode,localeCountryCode,ResultType.IGNORE);
      if (translation != null) {
        response=translation.getTranslatedValue();
      }
    }
  }
 else {
    statisticsService.addCacheStat(CacheStatType.TRANSLATION_CACHE_HIT_RATE.toString(),true);
    Map<String,Map<String,StandardCacheItem>> propertyTranslationMap=(Map<String,Map<String,StandardCacheItem>>)cacheResult.getObjectValue();
    Translation bestTranslation=findBestStandardTranslation(specificPropertyKey,generalPropertyKey,propertyTranslationMap,entityId);
    if (bestTranslation != null) {
      response=bestTranslation.getTranslatedValue();
    }
 else {
      response=getTemplateTranslatedValue(cacheKey,entity,property,entityType,entityId,localeCode,localeCountryCode,specificPropertyKey,generalPropertyKey);
    }
  }
  if (!StringUtils.isEmpty(response)) {
    return response;
  }
  return null;
}
