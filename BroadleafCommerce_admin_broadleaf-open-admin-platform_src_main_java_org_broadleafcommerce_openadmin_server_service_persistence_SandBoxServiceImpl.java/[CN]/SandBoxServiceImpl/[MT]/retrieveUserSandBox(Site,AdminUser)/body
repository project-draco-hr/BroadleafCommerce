{
  SandBox userSandbox;
  if (adminUser.getOverrideSandBox() != null) {
    userSandbox=adminUser.getOverrideSandBox();
  }
 else {
    userSandbox=sandBoxDao.retrieveNamedSandBox(site,SandBoxType.USER,adminUser.getLogin());
    if (userSandbox == null) {
synchronized (CREATE_SANDBOX_LOCK_TOKEN) {
        userSandbox=sandBoxDao.retrieveNamedSandBox(site,SandBoxType.USER,adminUser.getLogin());
        if (userSandbox == null) {
          SandBox sandBox=new SandBoxImpl();
          sandBox.setSite(site);
          sandBox.setName(adminUser.getLogin());
          sandBox.setSandBoxType(SandBoxType.USER);
          sandBox.setAuthor(adminUser.getId());
          userSandbox=sandBoxDao.persist(sandBox);
        }
      }
    }
  }
  return userSandbox;
}
