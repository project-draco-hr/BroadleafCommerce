{
  ThreadLocalManager.remove();
  if (thymeleafThreadLocalCleanupEnabled) {
    try {
      Field currentProcessLocale=TemplateEngine.class.getDeclaredField("currentProcessLocale");
      currentProcessLocale.setAccessible(true);
      ((ThreadLocal)currentProcessLocale.get(null)).remove();
      Field currentProcessTemplateEngine=TemplateEngine.class.getDeclaredField("currentProcessTemplateEngine");
      currentProcessTemplateEngine.setAccessible(true);
      ((ThreadLocal)currentProcessTemplateEngine.get(null)).remove();
      Field currentProcessTemplateName=TemplateEngine.class.getDeclaredField("currentProcessTemplateName");
      currentProcessTemplateName.setAccessible(true);
      ((ThreadLocal)currentProcessTemplateName.get(null)).remove();
    }
 catch (    Throwable e) {
      LOG.warn("Unable to remove Thymeleaf threadlocal variables from request thread",e);
    }
  }
}
