{
  if (requestedModuleKey != null && modules.get(requestedModuleKey) != null) {
    if (SecurityManager.getInstance().isUserAuthorizedToViewModule(requestedModuleKey)) {
      currentModuleKey=requestedModuleKey;
      return;
    }
  }
  currentModuleKey=null;
  for (  Map.Entry<String,Module> entry : modules.entrySet()) {
    Module currentModule=entry.getValue();
    if (SecurityManager.getInstance().isUserAuthorizedToViewModule(currentModule.getModuleKey())) {
      currentModuleKey=currentModule.getModuleKey();
      return;
    }
  }
}
