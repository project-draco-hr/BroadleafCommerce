{
  registerCustomerValidator.validate(registerCustomerForm,errors);
  if (!errors.hasErrors()) {
    customerService.registerCustomer(registerCustomerForm.getCustomer(),registerCustomerForm.getPassword(),registerCustomerForm.getPasswordConfirm());
    Authentication auth=loginService.loginCustomer(registerCustomerForm.getCustomer());
    mergeCartProcessor.execute(request,response,auth);
    return new ModelAndView(getRegistrationSuccessView());
  }
 else {
    return new ModelAndView(getRegistrationErrorView());
  }
}
