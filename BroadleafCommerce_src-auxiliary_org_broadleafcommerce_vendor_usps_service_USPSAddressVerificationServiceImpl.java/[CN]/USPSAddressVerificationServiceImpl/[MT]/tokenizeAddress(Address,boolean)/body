{
  String addLine1=addr.getAddressLine1();
  String addLine2=addr.getAddressLine2();
  String appendedAddress="";
  StringBuffer addressToken=new StringBuffer();
  String tokenizedAddress=null;
  if (isStandardized) {
    addressToken.append(addLine1);
    if (addLine2 != null) {
      addressToken.append(" " + addLine2);
    }
    tokenizedAddress=addressToken.toString().replaceAll(" ",EMPTY_STRING);
    tokenizedAddress=tokenizedAddress.toString().toUpperCase();
    tokenizedAddress=tokenizedAddress.replaceAll(",",EMPTY_STRING);
    tokenizedAddress=tokenizedAddress.replaceAll("\\n",EMPTY_STRING);
    tokenizedAddress=tokenizedAddress.replaceAll("\\r",EMPTY_STRING);
    tokenizedAddress=tokenizedAddress.replaceAll("-",EMPTY_STRING);
    tokenizedAddress=tokenizedAddress.replaceAll("#",EMPTY_STRING);
  }
 else {
    Map<Object,Object> uspsAbbrMap=abbreviations.getAbbreviationsMap();
    addressToken.append(addLine1 + " ");
    if (addLine2 != null) {
      addressToken.append(addLine2 + " ");
    }
    appendedAddress=addressToken.toString().toUpperCase();
    appendedAddress=appendedAddress.replaceAll(","," ");
    appendedAddress=appendedAddress.replaceAll("\\n",EMPTY_STRING);
    appendedAddress=appendedAddress.replaceAll("\\r",EMPTY_STRING);
    appendedAddress=appendedAddress.replaceAll("#"," ");
    appendedAddress=appendedAddress.replaceAll("-"," ");
    if (uspsAbbrMap != null) {
      Set<Object> stanAbbrMapSet=uspsAbbrMap.keySet();
      Iterator<Object> stanAbbrMapSetIterator=stanAbbrMapSet.iterator();
      while (stanAbbrMapSetIterator.hasNext()) {
        String addressKey=(String)stanAbbrMapSetIterator.next();
        if (appendedAddress.indexOf(" " + addressKey + " ") != -1) {
          String addressValue=(String)uspsAbbrMap.get(addressKey);
          appendedAddress=appendedAddress.replaceAll(addressKey,addressValue);
        }
      }
      tokenizedAddress=appendedAddress.replaceAll(" ",EMPTY_STRING);
    }
  }
  addr.setTokenizedAddress(tokenizedAddress);
}
