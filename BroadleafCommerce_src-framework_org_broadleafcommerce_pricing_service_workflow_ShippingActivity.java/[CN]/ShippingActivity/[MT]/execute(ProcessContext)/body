{
  Order order=((PricingContext)context).getSeedData();
  Money totalShipping=new Money(0D);
  for (  FulfillmentGroup fulfillmentGroup : order.getFulfillmentGroups()) {
    fulfillmentGroup=shippingModule.calculateShippingForFulfillmentGroup(fulfillmentGroup);
    offerService.applyFulfillmentGroupOffers(fulfillmentGroup);
    totalShipping=totalShipping.add(fulfillmentGroup.getShippingPrice());
  }
  order.setTotalShipping(totalShipping);
  context.setSeedData(order);
  return context;
}
