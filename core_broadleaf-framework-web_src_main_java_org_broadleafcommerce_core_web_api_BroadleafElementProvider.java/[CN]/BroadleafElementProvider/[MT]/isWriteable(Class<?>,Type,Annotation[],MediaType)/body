{
  Type lookupType=type;
  if (Collection.class.isAssignableFrom(type)) {
    final ParameterizedType pt=(ParameterizedType)genericType;
    if (pt.getActualTypeArguments().length > 1) {
      if (LOG.isInfoEnabled()) {
        LOG.info("A collection with multiple parameterized types is unsupported");
      }
      return false;
    }
    lookupType=pt.getActualTypeArguments()[0];
  }
 else   if (type.isArray()) {
    lookupType=type.getComponentType();
  }
  boolean result=false;
  try {
    Class<?> broadleafEntityClass=ec.lookupEntityClass(((Class<?>)lookupType).getName());
    if (broadleafEntityClass != null && (broadleafEntityClass.isAnnotationPresent(XmlRootElement.class) || broadleafEntityClass.isAnnotationPresent(XmlType.class))) {
      result=true;
    }
 else {
      if (LOG.isInfoEnabled()) {
        LOG.info(broadleafEntityClass.getName() + " is not annotated with JAXB annotations, skipping serialization");
      }
    }
  }
 catch (  NoSuchBeanDefinitionException e) {
    if (LOG.isDebugEnabled()) {
      LOG.debug("Could not find a mapping for " + ((Class<?>)lookupType).getName());
    }
  }
  return result && isSupported(mediaType);
}
