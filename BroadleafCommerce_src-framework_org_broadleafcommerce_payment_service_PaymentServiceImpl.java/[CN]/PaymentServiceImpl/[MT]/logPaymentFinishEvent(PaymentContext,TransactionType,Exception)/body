{
  PaymentInfo info=paymentContext.getPaymentInfo();
  PaymentLog log=paymentInfoService.createLog();
  log.setLogType(PaymentLogEventType.FINISHED);
  log.setTransactionTimestamp(new Date());
  log.setTransactionSuccess(e == null ? Boolean.TRUE : Boolean.FALSE);
  log.setTransactionType(transactionType);
  log.setCustomer(info.getOrder().getCustomer());
  log.setPaymentInfoReferenceNumber(info.getReferenceNumber());
  log.setUserName(paymentContext.getUserName());
  log.setExceptionMessage(e != null ? e.getMessage() : null);
  log.setAmountPaid(info.getAmount());
  log.setPaymentInfo(info);
  info.getPaymentLogs().add(log);
  paymentInfoService.save(info);
}
