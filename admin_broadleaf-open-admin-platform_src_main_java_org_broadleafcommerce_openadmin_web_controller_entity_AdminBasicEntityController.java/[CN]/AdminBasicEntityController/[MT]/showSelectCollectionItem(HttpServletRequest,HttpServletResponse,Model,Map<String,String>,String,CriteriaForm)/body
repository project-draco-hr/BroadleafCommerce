{
  String sectionKey=getSectionKey(pathVars);
  String mainClassName=getClassNameForSection(sectionKey);
  ClassMetadata mainMetadata=service.getClassMetadata(getSectionPersistencePackageRequest(mainClassName));
  Property collectionProperty=mainMetadata.getPMap().get(collectionField);
  FieldMetadata md=collectionProperty.getMetadata();
  PersistencePackageRequest ppr=PersistencePackageRequest.fromMetadata(md);
  if (criteriaForm != null) {
    ppr.addFilterAndSortCriteria(criteriaForm.getCriteria());
  }
  if (md instanceof BasicFieldMetadata) {
    Entity[] rows=service.getRecords(ppr);
    ListGrid listGrid=formService.buildCollectionListGrid(null,rows,collectionProperty,sectionKey);
    model.addAttribute("listGrid",listGrid);
    model.addAttribute("viewType","modal/simpleSelectEntity");
  }
  model.addAttribute("currentUrl",request.getRequestURL().toString());
  model.addAttribute("modalHeaderType","selectCollectionItem");
  model.addAttribute("collectionProperty",collectionProperty);
  setModelAttributes(model,sectionKey);
  return "modules/modalContainer";
}
