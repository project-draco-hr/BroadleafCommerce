{
  String failureUrlParam=request.getParameter("failureUrl");
  if (StringUtils.isNotEmpty(failureUrlParam)) {
    String failureUrl=failureUrlParam;
    String successUrlParam=request.getParameter("successUrl");
    if (StringUtils.isNotEmpty(successUrlParam)) {
      if (failureUrl.contains("?")) {
        failureUrl+="?successUrl=" + successUrlParam;
      }
 else {
        failureUrl+="&successUrl=" + successUrlParam;
      }
    }
    return failureUrl;
  }
  return super.determineFailureUrl(request,failed);
}
