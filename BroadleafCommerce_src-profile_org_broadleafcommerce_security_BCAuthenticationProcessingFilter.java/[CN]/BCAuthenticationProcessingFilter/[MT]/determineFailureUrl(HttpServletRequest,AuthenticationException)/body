{
  String failureUrlParam=request.getParameter("failureUrl");
  String successUrlParam=request.getParameter("successUrl");
  String failureUrl=null;
  if (StringUtils.isNotEmpty(failureUrlParam)) {
    failureUrl=failureUrlParam;
  }
 else {
    failureUrl=super.determineFailureUrl(request,failed);
  }
  if (StringUtils.isNotEmpty(successUrlParam)) {
    if (!failureUrl.contains("?")) {
      failureUrl+="?successUrl=" + successUrlParam;
    }
 else {
      failureUrl+="&successUrl=" + successUrlParam;
    }
  }
  return failureUrl;
}
