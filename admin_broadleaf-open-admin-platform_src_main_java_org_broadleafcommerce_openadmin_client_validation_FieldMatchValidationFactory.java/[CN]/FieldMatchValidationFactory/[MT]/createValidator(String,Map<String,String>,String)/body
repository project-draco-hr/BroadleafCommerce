{
  Object response=factory.newInstance(validatorClassname);
  if (response == null) {
    throw new RuntimeException("Unable to instantiate the item from the Factory using classname: (" + validatorClassname + "). Are you sure this classname is correct?");
  }
  MatchesFieldValidator valid=(MatchesFieldValidator)response;
  if (configurationItems.containsKey("errorMessageKey")) {
    String message=BLCMain.getMessageManager().getString(configurationItems.get("errorMessageKey"));
    if (message != null) {
      valid.setErrorMessage(message);
    }
  }
 else   if (configurationItems.containsKey("errorMessage")) {
    valid.setErrorMessage(configurationItems.get("errorMessage"));
  }
  if (configurationItems.get("otherField") == null) {
    throw new RuntimeException("Usage of MatchesFieldValidator requires a configurationItem be set for 'otherField'");
  }
  valid.setOtherField(configurationItems.get("otherField"));
  return valid;
}
