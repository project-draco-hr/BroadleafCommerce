{
  initialValues.put("_type",new String[]{((DynamicEntityDataSource)display.getListDisplay().getGrid().getDataSource()).getDefaultNewEntityFullyQualifiedClassname()});
  initialValues.put("csrfToken",BLCMain.csrfToken);
  compileDefaultValuesFromCurrentFilter(initialValues);
  Map<String,String> hints=new HashMap<String,String>();
  hints.put("name",BLCMain.getMessageManager().getString("assetUploadNameHint"));
  hints.put("fullUrl",BLCMain.getMessageManager().getString("assetUploadFullUrlHint"));
  FILE_UPLOAD.editNewRecord("Upload Artifact",getPresenterSequenceSetupManager().getDataSource("staticAssetTreeDS"),initialValues,hints,new ItemEditedHandler(){
    public void onItemEdited(    ItemEdited event){
      ListGridRecord[] recordList=new ListGridRecord[]{(ListGridRecord)event.getRecord()};
      DSResponse updateResponse=new DSResponse();
      updateResponse.setData(recordList);
      DSRequest updateRequest=new DSRequest();
      updateRequest.setOperationType(DSOperationType.UPDATE);
      getDisplay().getListDisplay().getGrid().getDataSource().updateCaches(updateResponse,updateRequest);
      getDisplay().getListDisplay().getGrid().deselectAllRecords();
      getDisplay().getListDisplay().getGrid().selectRecord(getDisplay().getListDisplay().getGrid().getRecordIndex(event.getRecord()));
      String primaryKey=getDisplay().getListDisplay().getGrid().getDataSource().getPrimaryKeyFieldName();
      ResultSet results=getDisplay().getListDisplay().getGrid().getResultSet();
      boolean foundRecord=false;
      if (results != null) {
        foundRecord=getDisplay().getListDisplay().getGrid().getResultSet().find(primaryKey,event.getRecord().getAttribute(primaryKey)) != null;
      }
      if (!foundRecord) {
        ((AbstractDynamicDataSource)getDisplay().getListDisplay().getGrid().getDataSource()).setAddedRecord(event.getRecord());
        getDisplay().getListDisplay().getGrid().getDataSource().fetchData(new Criteria("blc.fetch.from.cache",event.getRecord().getAttribute(primaryKey)),new DSCallback(){
          @Override public void execute(          DSResponse response,          Object rawData,          DSRequest request){
            getDisplay().getListDisplay().getGrid().setData(response.getData());
            getDisplay().getListDisplay().getGrid().selectRecord(0);
          }
        }
);
      }
    }
  }
,null,new String[]{"file","name","fullUrl","callbackName","operation","ceilingEntityFullyQualifiedClassname","parentFolder","customCriteria","csrfToken"},null);
}
