{
  try {
    Order order=promotableOrder.getDelegate();
    if (!CollectionUtils.isEmpty(order.getFulfillmentGroups())) {
      List<OrderMultishipOption> options=orderMultishipOptionService.findOrderMultishipOptions(order.getId());
      promotableOrder.setMultiShipOptions(options);
      promotableOrder.setHasMultiShipOptions(!CollectionUtils.isEmpty(options));
      orderMultishipOptionService.deleteAllOrderMultishipOptions(order);
      fulfillmentGroupService.collapseToOneFulfillmentGroup(order,false);
    }
  }
 catch (  PricingException e) {
    throw new RuntimeException("Could not prepare the cart",e);
  }
}
