{
  List<OrderItem> basicOrderItems=order.getDelegate().getOrderItems();
  for (  OrderItem basicOrderItem : basicOrderItems) {
    if (basicOrderItem instanceof BundleOrderItem) {
      BundleOrderItem bundleOrderItem=(BundleOrderItem)basicOrderItem;
      List<BundleOrderItem> searchHit=order.searchBundleSplitItems(bundleOrderItem);
      if (searchHit == null) {
        searchHit=new ArrayList<BundleOrderItem>();
        BundleOrderItemSplitContainer container=new BundleOrderItemSplitContainer();
        container.setKey(bundleOrderItem);
        container.setSplitItems(searchHit);
        order.getBundleSplitItems().add(container);
      }
      BundleOrderItem temp=(BundleOrderItem)bundleOrderItem.clone();
      for (int x=0; x < temp.getDiscreteOrderItems().size(); x++) {
        temp.getDiscreteOrderItems().get(x).setId(bundleOrderItem.getDiscreteOrderItems().get(x).getId());
      }
      temp.setId(-1L);
      searchHit.add(temp);
    }
  }
}
