{
  Order order=promotableOrder.getDelegate();
  try {
    if (!CollectionUtils.isEmpty(order.getFulfillmentGroups())) {
      gatherFulfillmentGroupLinkedDiscreteOrderItems(order);
      gatherFulfillmentGroupLinkedBundleOrderItems(order);
    }
 else {
      gatherOrderLinkedDiscreteOrderItems(order);
      gatherOrderLinkedBundleOrderItems(order);
    }
  }
 catch (  PricingException e) {
    throw new RuntimeException("Could not gather the cart",e);
  }
  promotableOrder.resetDiscreteOrderItems();
}
