{
  String identifier=null;
  if (orderItem.getSplitParentItemId() != null || cartService.getAutomaticallyMergeLikeItems()) {
    if (!cartService.getAutomaticallyMergeLikeItems()) {
      identifier=String.valueOf(orderItem.getSplitParentItemId());
    }
 else {
      if (orderItem instanceof BundleOrderItem) {
        BundleOrderItem bundleOrderItem=(BundleOrderItem)orderItem;
        if (bundleOrderItem.getSku() != null) {
          identifier=String.valueOf(bundleOrderItem.getSku().getId());
        }
 else {
          if (orderItem.getSplitParentItemId() != null) {
            identifier=String.valueOf(orderItem.getSplitParentItemId());
          }
 else {
            identifier=String.valueOf(orderItem.getId());
          }
        }
      }
 else       if (orderItem instanceof DiscreteOrderItem) {
        DiscreteOrderItem discreteOrderItem=(DiscreteOrderItem)orderItem;
        identifier=String.valueOf(discreteOrderItem.getSku().getId());
      }
 else {
        if (orderItem.getSplitParentItemId() != null) {
          identifier=String.valueOf(orderItem.getSplitParentItemId());
        }
 else {
          identifier=String.valueOf(orderItem.getId());
        }
      }
    }
    identifier+='_' + orderItem.getPrice().stringValue();
    if (extraIdentifier != null) {
      identifier+='_' + extraIdentifier;
    }
  }
 else {
    identifier=orderItem.getId().toString();
  }
  return identifier;
}
