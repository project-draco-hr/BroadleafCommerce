{
  Order order=((PricingContext)context).getSeedData();
  Money totalShipping=BroadleafCurrencyUtils.getMoney(BigDecimal.ZERO,order.getCurrency());
  for (  FulfillmentGroup fulfillmentGroup : order.getFulfillmentGroups()) {
    if (fulfillmentGroup != null) {
      fulfillmentGroup=fulfillmentPricingService.calculateCostForFulfillmentGroup(fulfillmentGroup);
      if (fulfillmentGroup.getShippingPrice() != null) {
        totalShipping=totalShipping.add(fulfillmentGroup.getShippingPrice());
      }
    }
  }
  order.setTotalShipping(totalShipping);
  context.setSeedData(order);
  return context;
}
