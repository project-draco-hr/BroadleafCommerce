{
  StaticAssetStorageServiceImpl staticAssetStorageService=new StaticAssetStorageServiceImpl();
  staticAssetStorageService.assetFileSystemPath=System.getProperty("java.io.tmpdir");
  staticAssetStorageService.assetServerMaxGeneratedDirectories=2;
  String str="This string is too long";
  staticAssetStorageService.maxUploadableFileSize=str.length() - 1;
  InputStream is=new ByteArrayInputStream(str.getBytes());
  MockMultipartFile mpf=new MockMultipartFile("Test File",is);
  StaticAsset staticAsset=new StaticAssetImpl();
  staticAsset.setFileExtension(".jpg");
  staticAsset.setFullUrl("/product/myproduct.jpg");
  staticAsset.setStorageType(StorageType.FILESYSTEM);
  String fileName=staticAssetStorageService.generateStorageFileName(staticAsset,false);
  boolean exceptionThrown=false;
  try {
    staticAssetStorageService.createStaticAssetStorageFromFile(mpf,staticAsset);
  }
 catch (  Exception e) {
    exceptionThrown=true;
  }
  assertTrue("Service call threw an exception",exceptionThrown);
  File f=new File(staticAssetStorageService.assetFileSystemPath + fileName);
  if (f.exists()) {
    f.delete();
  }
}
