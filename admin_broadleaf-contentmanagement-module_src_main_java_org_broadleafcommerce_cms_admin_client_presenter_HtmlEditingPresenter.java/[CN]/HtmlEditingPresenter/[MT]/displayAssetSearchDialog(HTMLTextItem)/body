{
  HashMap<String,Object> initialValues=new HashMap<String,Object>(10);
  initialValues.put("operation","add");
  initialValues.put("customCriteria","assetListUi");
  initialValues.put("ceilingEntityFullyQualifiedClassname",CeilingEntities.STATICASSETS);
  initialValues.put("_type",new String[]{((DynamicEntityDataSource)display.getListDisplay().getGrid().getDataSource()).getDefaultNewEntityFullyQualifiedClassname()});
  initialValues.put("csrfToken",BLCMain.csrfToken);
  compileDefaultValuesFromCurrentFilter(initialValues);
  assetSearchDialogView.setInitialValues(initialValues);
  assetSearchDialogView.search("Asset Search",new TileGridItemSelectedHandler(){
    @Override public void onSearchItemSelected(    TileGridItemSelected event){
      String staticAssetFullUrl=BLCMain.assetServerUrlPrefix + event.getRecord().getAttribute("fullUrl");
      String name=event.getRecord().getAttribute("name");
      String fileExtension=event.getRecord().getAttribute("fileExtension");
      String richContent;
      if (fileExtension.equals("gif") || fileExtension.equals("jpg") || fileExtension.equals("png")) {
        richContent="<img title='" + name + "' src='"+ staticAssetFullUrl+ "' alt='"+ name+ "'/>";
      }
 else {
        richContent="<a href='" + staticAssetFullUrl + "'>"+ name+ "</a>";
      }
      LogFactory.getLog(this.getClass()).debug("inserting from dialog...." + fileExtension + " "+ name+ " "+ staticAssetFullUrl);
      item.insertAsset(fileExtension,name,staticAssetFullUrl);
    }
  }
);
}
