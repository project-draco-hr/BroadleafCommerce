{
  if (!customer.isRegistered()) {
    customer.setRegistered(true);
  }
  if (customer.getUnencodedPassword() != null) {
    customer.setPassword(passwordEncoder.encodePassword(customer.getUnencodedPassword(),null));
  }
  return customerDao.maintainCustomer(customer);
}
