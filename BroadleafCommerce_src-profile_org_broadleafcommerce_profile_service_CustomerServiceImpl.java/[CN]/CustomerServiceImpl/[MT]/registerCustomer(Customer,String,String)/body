{
  RegistrationResponse response=new RegistrationResponse(customer,customer.getClass().getSimpleName());
  if (!response.hasErrors()) {
    customer.setRegistered(true);
    Customer retCustomer=saveCustomer(customer);
    notifyPostRegisterListeners(retCustomer);
    this.sendConfirmationEmail(retCustomer);
    response.setCustomer(retCustomer);
  }
  return response;
}
