{
  for (  SandBoxItem item : sandBoxItems) {
    if (item.getOriginalSandBoxId() == null) {
      throw new IllegalArgumentException("Cannot reject a SandBoxItem whose originalSandBox member is null");
    }
  }
  SandBoxAction action=createSandBoxAction(SandBoxActionType.REJECT,comment);
  SandBox originalSandBox=null;
  for (  SandBoxItem sandBoxItem : sandBoxItems) {
    action.addSandBoxItem(sandBoxItem);
    if (sandBoxItem.getOriginalSandBoxId() != null) {
      if (originalSandBox != null && !originalSandBox.getId().equals(sandBoxItem.getOriginalItemId())) {
        originalSandBox=sandBoxDao.retrieve(sandBoxItem.getOriginalItemId());
      }
    }
 else {
      originalSandBox=null;
    }
    for (    SandBoxItemListener listener : sandboxItemListeners) {
      listener.itemRejected(sandBoxItem,originalSandBox);
    }
    sandBoxItem.addSandBoxAction(action);
    sandBoxItem.setSandBoxId(sandBoxItem.getOriginalSandBoxId());
    sandBoxItem.setOriginalSandBoxId(null);
  }
}
