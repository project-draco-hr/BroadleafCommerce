{
  try {
    Class toolClass=resolveClass(toolClassName);
    URL url=toolClass.getProtectionDomain().getCodeSource().getLocation();
    String fileName=url.getFile();
    String[] temp=cmdl.getArguments();
    String s="";
    super.setClassname(toolClassName);
    super.setClasspath(new Path(getProject(),fileName));
    for (int i=0; i < temp.length; i++) {
      if (temp[i] != null) {
        s+=temp[i] + " ";
      }
    }
    super.setArgs(s);
    int err=super.executeJava();
    if (err > 0) {
      throw new BuildException(toolName + " task failed.");
    }
  }
  finally {
    if (originalContextClassLoader != null) {
      Thread.currentThread().setContextClassLoader(originalContextClassLoader);
    }
  }
}
