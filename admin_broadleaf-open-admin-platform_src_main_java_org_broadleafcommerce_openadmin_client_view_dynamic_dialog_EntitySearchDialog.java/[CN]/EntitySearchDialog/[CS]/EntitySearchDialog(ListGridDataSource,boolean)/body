{
  super();
  this.setIsModal(true);
  this.setShowModalMask(true);
  this.setShowMinimizeButton(false);
  this.setWidth(600);
  this.setHeight(300);
  this.setCanDragResize(true);
  this.setOverflow(Overflow.AUTO);
  this.setVisible(false);
  searchGrid=new ListGrid();
  searchGrid.setAutoFetchData(autoFetch);
  searchGrid.setAlternateRecordStyles(true);
  searchGrid.setSelectionType(SelectionStyle.SINGLE);
  searchGrid.setShowAllColumns(false);
  searchGrid.setShowAllRecords(false);
  searchGrid.setDrawAllMaxCells(20);
  searchGrid.setShowFilterEditor(true);
  searchGrid.setHeight(230);
  searchGrid.setEmptyMessage(BLCMain.getMessageManager().getString("emptyMessage"));
  searchGrid.setCanGroupBy(false);
  dataSource.setAssociatedGrid(searchGrid);
  searchGrid.setDataSource(dataSource);
  dataSource.setupGridFields(new String[]{},new Boolean[]{});
  searchGrid.setCanEdit(false);
  searchGrid.addSelectionChangedHandler(new SelectionChangedHandler(){
    @Override public void onSelectionChanged(    SelectionEvent event){
      if (searchGrid.anySelected()) {
        saveButton.enable();
      }
    }
  }
);
  addItem(searchGrid);
  saveButton=new IButton(BLCMain.getMessageManager().getString("ok"));
  saveButton.addClickHandler(new ClickHandler(){
    @Override public void onClick(    ClickEvent event){
      Record selectedRecord=searchGrid.getSelectedRecord();
      EntitySearchDialog.this.handler.onSearchItemSelected(new SearchItemSelected((ListGridRecord)selectedRecord,searchGrid.getDataSource()));
      hide();
    }
  }
);
  IButton cancelButton=new IButton(BLCMain.getMessageManager().getString("cancel"));
  cancelButton.addClickHandler(new ClickHandler(){
    @Override public void onClick(    ClickEvent event){
      hide();
    }
  }
);
  HLayout hLayout=new HLayout(10);
  hLayout.setAlign(Alignment.CENTER);
  hLayout.addMember(saveButton);
  hLayout.addMember(cancelButton);
  hLayout.setLayoutTopMargin(10);
  hLayout.setLayoutBottomMargin(10);
  addItem(hLayout);
}
