{
  Money savings=new Money(0);
  int maxUses=calculateMaximumNumberOfUses();
  int appliedCount=0;
  for (  OfferItemCriteria itemCriteria : candidateQualifiersMap.keySet()) {
    List<OrderItem> targetItems=candidateQualifiersMap.get(itemCriteria);
    for (    OrderItem chgItem : targetItems) {
      int qtyToReceiveSavings=Math.min(chgItem.getQuantity(),maxUses);
      savings=calculateSavingsForOrderItem(chgItem,qtyToReceiveSavings);
      appliedCount=appliedCount + qtyToReceiveSavings;
      if (appliedCount >= maxUses) {
        return savings;
      }
    }
  }
  return savings;
}
