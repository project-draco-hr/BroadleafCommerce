{
  CriteriaTransferObject criteriaTransferObject=getCto(request);
  final String parentCategoryId=criteriaTransferObject.get(criteriaTransferObject.getPropertyIdSet().iterator().next()).getFilterValues()[0];
  service.fetch(new PersistencePackage(ceilingEntityFullyQualifiedClassname,null,persistencePerspective,customCriteria,BLCMain.csrfToken),criteriaTransferObject,new EntityServiceAsyncCallback<DynamicResultSet>(EntityOperationType.FETCH,requestId,request,response,dataSource){
    public void onSuccess(    DynamicResultSet result){
      super.onSuccess(result);
      TreeNode[] recordList=buildRecords(result,null);
      MapStructure mapStructure=(MapStructure)persistencePerspective.getPersistencePerspectiveItems().get(PersistencePerspectiveItemType.MAPSTRUCTURE);
      for (      TreeNode node : recordList) {
        node.setAttribute("symbolicId",parentCategoryId);
        node.setAttribute("priorKey",node.getAttribute(mapStructure.getKeyPropertyName()));
      }
      response.setData(recordList);
      response.setTotalRows(result.getTotalRecords());
      if (cb != null) {
        cb.onSuccess(dataSource);
      }
      dataSource.processResponse(requestId,response);
    }
  }
);
}
