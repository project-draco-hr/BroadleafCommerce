{
synchronized (this) {
    if (configuration == null) {
      Ejb3Configuration temp=new Ejb3Configuration();
      configuration=temp.configure(persistenceUnitInfo,new HashMap());
      configuration.getHibernateConfiguration().buildSessionFactory();
    }
  }
  return configuration;
}
