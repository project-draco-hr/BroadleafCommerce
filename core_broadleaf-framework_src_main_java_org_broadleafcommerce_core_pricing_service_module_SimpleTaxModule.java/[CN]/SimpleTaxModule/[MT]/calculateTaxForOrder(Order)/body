{
  for (  FulfillmentGroup fulfillmentGroup : order.getFulfillmentGroups()) {
    for (    FulfillmentGroupItem fgItem : fulfillmentGroup.getFulfillmentGroupItems()) {
      fgItem.getTaxes().clear();
      TaxDetail tax=new TaxDetailImpl();
      tax.setRate(new BigDecimal(factor));
      tax.setType(TaxType.STATE);
      tax.setAmount(fgItem.getPrice().multiply(fgItem.getQuantity()).multiply(factor));
      fgItem.getTaxes().add(tax);
    }
  }
  return order;
}
