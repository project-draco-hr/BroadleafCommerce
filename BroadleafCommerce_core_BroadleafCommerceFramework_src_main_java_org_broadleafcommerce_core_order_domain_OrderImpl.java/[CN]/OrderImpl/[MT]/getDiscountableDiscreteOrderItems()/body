{
  List<DiscreteOrderItem> discreteOrderItems=new ArrayList<DiscreteOrderItem>();
  for (  OrderItem orderItem : orderItems) {
    if (orderItem instanceof BundleOrderItemImpl) {
      BundleOrderItemImpl bundleOrderItem=(BundleOrderItemImpl)orderItem;
      for (      DiscreteOrderItem discreteOrderItem : bundleOrderItem.getDiscreteOrderItems()) {
        if (discreteOrderItem.getSku().isDiscountable()) {
          discreteOrderItems.add(discreteOrderItem);
        }
      }
    }
 else {
      DiscreteOrderItem discreteOrderItem=(DiscreteOrderItem)orderItem;
      if (discreteOrderItem.getSku().isDiscountable()) {
        discreteOrderItems.add(discreteOrderItem);
      }
    }
  }
  return discreteOrderItems;
}
