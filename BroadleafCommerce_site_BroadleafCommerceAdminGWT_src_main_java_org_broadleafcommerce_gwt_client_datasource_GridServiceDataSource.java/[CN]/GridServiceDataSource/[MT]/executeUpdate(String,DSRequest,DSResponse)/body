{
  JavaScriptObject data=request.getData();
  TreeNode record=new TreeNode(data);
  ListGrid grid=(ListGrid)Canvas.getById(request.getComponentId());
  int index=grid.getRecordIndex(record);
  record=(TreeNode)grid.getEditedRecord(index);
  Entity entity=newEntityInstance();
  copyValues(record,entity);
  service.update(entity,new GridServiceAsyncCallback<Entity>(GridOperationType.UPDATE,requestId,request,response){
    public void onSuccess(    Entity result){
      TreeNode[] list=new TreeNode[1];
      TreeNode updRec=new TreeNode();
      copyValues(result,updRec);
      list[0]=updRec;
      response.setData(list);
      processResponse(requestId,response);
    }
  }
);
}
