{
  RollbackStateLocal rollbackStateLocal=getRollbackStateLocal();
  List<StateContainer> containers=stateMap.get(rollbackStateLocal.getThreadId() + "_" + rollbackStateLocal.getWorkflowId());
  if (containers != null) {
    Iterator<StateContainer> itr=containers.iterator();
    while (itr.hasNext()) {
      StateContainer stateContainer=itr.next();
      if ((region == null && stateContainer.getRegion() == null) || (region != null && region.equals(stateContainer.getRegion()))) {
        stateContainer.getRollbackHandler().rollbackState(stateContainer.getActivity(),stateContainer.getProcessContext(),stateContainer.getStateItems());
        itr.remove();
      }
    }
  }
}
