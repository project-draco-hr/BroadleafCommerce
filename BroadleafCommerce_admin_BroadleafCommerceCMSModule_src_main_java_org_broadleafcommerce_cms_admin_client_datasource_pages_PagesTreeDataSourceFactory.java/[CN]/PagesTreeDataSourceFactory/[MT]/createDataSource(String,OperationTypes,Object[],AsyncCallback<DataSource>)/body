{
  if (dataSource == null) {
    operationTypes=new OperationTypes(OperationType.ENTITY,OperationType.ENTITY,OperationType.ENTITY,OperationType.ENTITY,OperationType.ENTITY);
    PersistencePerspective persistencePerspective=new PersistencePerspective(operationTypes,new String[]{},new ForeignKey[]{new ForeignKey(pageTemplateForeignKey,EntityImplementations.PAGETEMPLATE,null,ForeignKeyRestrictionType.ID_EQ,"templateName")});
    persistencePerspective.addPersistencePerspectiveItem(PersistencePerspectiveItemType.FOREIGNKEY,new ForeignKey(parentFolderForeignKey,EntityImplementations.PAGEFOLDERIMPL,null));
    DataSourceModule[] modules=new DataSourceModule[]{new PagesClientEntityModule(CeilingEntities.PAGEFOLDER,persistencePerspective,AppServices.DYNAMIC_ENTITY)};
    dataSource=new PagesTreeDataSource(name,persistencePerspective,AppServices.DYNAMIC_ENTITY,modules,null,null);
    dataSource.buildFields(null,false,cb);
  }
 else {
    if (cb != null) {
      cb.onSuccess(dataSource);
    }
  }
}
