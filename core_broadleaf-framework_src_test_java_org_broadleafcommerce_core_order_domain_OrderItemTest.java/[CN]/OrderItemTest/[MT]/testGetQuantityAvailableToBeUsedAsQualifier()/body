{
  int quantity=priceDetail1.getQuantityAvailableToBeUsedAsQualifier(candidateOffer);
  assertTrue(quantity == 2);
  PromotionDiscount discount=new PromotionDiscount();
  discount.setPromotion(offer);
  discount.setQuantity(1);
  priceDetail1.getPromotionDiscounts().add(discount);
  quantity=priceDetail1.getQuantityAvailableToBeUsedAsQualifier(candidateOffer);
  assertTrue(quantity == 1);
  Offer testOffer=new OfferImpl();
  testOffer.setOfferItemQualifierRuleType(OfferItemRestrictionRuleType.NONE);
  testOffer.setOfferItemTargetRuleType(OfferItemRestrictionRuleType.NONE);
  discount.setPromotion(testOffer);
  quantity=priceDetail1.getQuantityAvailableToBeUsedAsQualifier(candidateOffer);
  assertTrue(quantity == 1);
  testOffer.setOfferItemTargetRuleType(OfferItemRestrictionRuleType.QUALIFIER);
  candidateOffer.getOffer().setOfferItemQualifierRuleType(OfferItemRestrictionRuleType.TARGET);
  quantity=priceDetail1.getQuantityAvailableToBeUsedAsQualifier(candidateOffer);
  assertTrue(quantity == 2);
  priceDetail1.getPromotionDiscounts().clear();
  PromotionQualifier qualifier=new PromotionQualifier();
  qualifier.setPromotion(offer);
  qualifier.setQuantity(1);
  priceDetail1.getPromotionQualifiers().add(qualifier);
  quantity=priceDetail1.getQuantityAvailableToBeUsedAsQualifier(candidateOffer);
  assertTrue(quantity == 1);
  qualifier.setPromotion(testOffer);
  quantity=priceDetail1.getQuantityAvailableToBeUsedAsQualifier(candidateOffer);
  assertTrue(quantity == 1);
  testOffer.setOfferItemQualifierRuleType(OfferItemRestrictionRuleType.QUALIFIER);
  candidateOffer.getOffer().setOfferItemQualifierRuleType(OfferItemRestrictionRuleType.QUALIFIER);
  quantity=priceDetail1.getQuantityAvailableToBeUsedAsQualifier(candidateOffer);
  assertTrue(quantity == 2);
}
