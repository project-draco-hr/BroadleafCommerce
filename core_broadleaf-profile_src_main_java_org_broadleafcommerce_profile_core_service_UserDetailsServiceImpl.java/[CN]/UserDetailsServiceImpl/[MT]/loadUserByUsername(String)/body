{
  Customer customer=customerService.readCustomerByUsername(username);
  if (customer == null) {
    throw new UsernameNotFoundException("The customer was not found");
  }
  List<GrantedAuthority> grantedAuthorities=createGrantedAuthorities(roleService.findCustomerRolesByCustomerId(customer.getId()));
  return new User(username,customer.getPassword(),true,true,!customer.isPasswordChangeRequired(),true,grantedAuthorities);
}
