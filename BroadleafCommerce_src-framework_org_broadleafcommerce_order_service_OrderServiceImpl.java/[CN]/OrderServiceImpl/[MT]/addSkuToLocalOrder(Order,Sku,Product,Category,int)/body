{
  OrderItem orderItem=null;
  List<OrderItem> orderItems=order.getOrderItems();
  if (orderItems != null && rollupOrderItems) {
    for (    OrderItem orderItem2 : orderItems) {
      if (orderItem2.getSku().getId().equals(item.getId())) {
        orderItem=orderItem2;
        break;
      }
    }
  }
  if (orderItem == null) {
    orderItem=orderItemDao.create();
  }
  orderItem.setProduct(product);
  orderItem.setCategory(category);
  orderItem.setSku(item);
  orderItem.setQuantity(orderItem.getQuantity() + quantity);
  orderItem.setOrderId(order.getId());
  return orderItem;
}
