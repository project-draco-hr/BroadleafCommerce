{
  FulfillmentGroupItem fgi=null;
  Order order=orderDao.readOrderById(item.getOrderId());
  if (fulfillmentGroup.getId() == null) {
    fulfillmentGroup=addFulfillmentGroupToOrder(order,fulfillmentGroup);
  }
  for (  FulfillmentGroup fg : order.getFulfillmentGroups()) {
    if (fg.getFulfillmentGroupItems() != null) {
      for (      FulfillmentGroupItem tempFgi : fg.getFulfillmentGroupItems()) {
        if (tempFgi.getOrderItem().getId().equals(item.getId())) {
          fgi=tempFgi;
          fg.getFulfillmentGroupItems().remove(fg);
          fulfillmentGroupDao.maintainFulfillmentGroup(fg);
        }
      }
    }
  }
  if (fgi == null) {
    fgi=createFulfillmentGroupItemFromOrderItem(item,fulfillmentGroup.getId());
  }
  fulfillmentGroupItemDao.maintainFulfillmentGroupItem(fgi);
  return fulfillmentGroupDao.readFulfillmentGroupById(fulfillmentGroup.getId());
}
