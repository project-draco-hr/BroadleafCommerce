{
  Offer offer=new OfferImpl();
  OfferRule customerRule=new OfferRuleImpl();
  customerRule.setMatchRule(appliesToCustomerRules);
  offer.getOfferMatchRulesXref().put(OfferRuleType.CUSTOMER.getType(),createXref(customerRule,offer,OfferRuleType.CUSTOMER.getType()));
  OfferRule fgRule=new OfferRuleImpl();
  fgRule.setMatchRule(appliesToFulfillmentGroupRules);
  offer.getOfferMatchRulesXref().put(OfferRuleType.FULFILLMENT_GROUP.getType(),createXref(fgRule,offer,OfferRuleType.FULFILLMENT_GROUP.getType()));
  OfferRule orderRule=new OfferRuleImpl();
  orderRule.setMatchRule(appliesToRules);
  offer.getOfferMatchRulesXref().put(OfferRuleType.ORDER.getType(),createXref(orderRule,offer,OfferRuleType.ORDER.getType()));
  offer.setApplyDiscountToSalePrice(applyToSalePrice);
  offer.setCombinableWithOtherOffers(combinableWithOtherOffers);
  offer.setDeliveryType(deliveryType);
  offer.setAutomaticallyAdded(OfferDeliveryType.AUTOMATIC == deliveryType);
  offer.setDiscountType(type);
  offer.setEndDate(endDate);
  offer.setMaxUses(maxUses);
  offer.setOfferItemQualifierRuleType(qualifierType);
  offer.setOfferItemTargetRuleType(targetType);
  offer.setPriority(priority);
  offer.setQualifyingItemCriteriaXref(qualifyingItemCriteriaXref);
  offer.setStackable(stackable);
  offer.setStartDate(startDate);
  offer.setTargetItemCriteriaXref(targetItemCriteriaXref);
  offer.setTotalitarianOffer(totalitarianOffer);
  offer.setType(offerType);
  offer.setValue(value);
  offer.setTreatAsNewFormat(true);
  offer.setId(getOfferId());
  return offer;
}
