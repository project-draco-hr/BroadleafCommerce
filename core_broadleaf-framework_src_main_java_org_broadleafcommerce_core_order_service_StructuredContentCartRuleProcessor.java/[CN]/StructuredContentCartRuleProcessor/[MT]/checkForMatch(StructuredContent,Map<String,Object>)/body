{
  if (sc != null && sc.getStructuredContentMatchRules() != null) {
    Set<StructuredContentItemCriteria> itemCriteriaSet=sc.getQualifyingItemCriteria();
    if (itemCriteriaSet != null && itemCriteriaSet.size() > 0) {
      Order order=lookupOrderForCustomer((Customer)valueMap.get("customer"));
      if (order == null || order.getOrderItems() == null || order.getOrderItems().size() < 1) {
        return false;
      }
      for (      StructuredContentItemCriteria itemCriteria : itemCriteriaSet) {
        if (!checkItemCriteria(itemCriteria,order.getOrderItems())) {
          return false;
        }
      }
    }
  }
  return true;
}
