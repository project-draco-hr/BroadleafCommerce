{
  display.getAddButton().addClickHandler(new ClickHandler(){
    public void onClick(    ClickEvent event){
      if (event.isLeftButtonDown()) {
        addClicked();
      }
    }
  }
);
  display.getRemoveButton().addClickHandler(new ClickHandler(){
    public void onClick(    ClickEvent event){
      if (event.isLeftButtonDown()) {
        removeClicked();
      }
    }
  }
);
  display.getGrid().addSelectionChangedHandler(new SelectionChangedHandler(){
    public void onSelectionChanged(    SelectionEvent event){
      ListGridRecord selectedRecord=event.getSelectedRecord();
      if (event.getState()) {
        if (!selectedRecord.equals(lastSelectedRecord)) {
          lastSelectedRecord=selectedRecord;
          if (selectedRecord.getAttribute("name") == null || selectedRecord.getAttribute("type") == null) {
            display.getDynamicForm().disable();
            display.getFormToolBar().disable();
            display.getRemoveButton().disable();
          }
 else {
            display.getDynamicForm().enable();
            display.getFormToolBar().enable();
            ((DynamicEntityDataSource)display.getGrid().getDataSource()).resetFieldVisibilityBasedOnType(selectedRecord.getAttribute("type"));
            ((AbstractView)display).buildFields(display.getGrid().getDataSource(),display.getDynamicForm());
            display.getDynamicForm().editRecord(selectedRecord);
            display.getRemoveButton().enable();
          }
          changeSelection(selectedRecord);
        }
      }
    }
  }
);
  display.getEntityType().addChangedHandler(new ChangedHandler(){
    public void onChanged(    ChangedEvent event){
      ((DynamicEntityDataSource)display.getGrid().getDataSource()).setDefaultNewEntityFullyQualifiedClassname((String)event.getItem().getValue());
    }
  }
);
  display.getSaveFormButton().addClickHandler(new ClickHandler(){
    public void onClick(    ClickEvent event){
      if (event.isLeftButtonDown()) {
        display.getDynamicForm().saveData();
        display.getSaveFormButton().disable();
      }
    }
  }
);
  display.getRefreshButton().addClickHandler(new ClickHandler(){
    public void onClick(    ClickEvent event){
      if (event.isLeftButtonDown()) {
        display.getDynamicForm().reset();
        display.getSaveFormButton().disable();
      }
    }
  }
);
  display.getDynamicForm().addItemChangedHandler(new ItemChangedHandler(){
    public void onItemChanged(    ItemChangedEvent event){
      display.getSaveFormButton().enable();
    }
  }
);
  display.getGrid().addCellSavedHandler(new CellSavedHandler(){
    public void onCellSaved(    CellSavedEvent event){
      display.getSaveFormButton().disable();
      display.getDynamicForm().editRecord(event.getRecord());
    }
  }
);
}
