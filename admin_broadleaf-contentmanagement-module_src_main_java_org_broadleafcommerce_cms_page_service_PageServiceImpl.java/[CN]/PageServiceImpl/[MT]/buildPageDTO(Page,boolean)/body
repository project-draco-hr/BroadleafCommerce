{
  PageDTO pageDTO=new PageDTO();
  pageDTO.setId(page.getId());
  pageDTO.setDescription(page.getDescription());
  pageDTO.setUrl(page.getFullUrl());
  if (page.getSandbox() != null) {
    pageDTO.setSandboxId(page.getSandbox().getId());
  }
  if (page.getPageTemplate() != null) {
    pageDTO.setTemplatePath(page.getPageTemplate().getTemplatePath());
    if (page.getPageTemplate().getLocale() != null) {
      pageDTO.setLocaleCode(page.getPageTemplate().getLocale().getLocaleCode());
    }
  }
  String envPrefix=staticAssetService.getStaticAssetEnvironmentUrlPrefix();
  if (envPrefix != null && secure) {
    envPrefix=staticAssetService.getStaticAssetEnvironmentSecureUrlPrefix();
  }
  String cmsPrefix=staticAssetService.getStaticAssetUrlPrefix();
  for (  String fieldKey : page.getPageFields().keySet()) {
    PageField pf=page.getPageFields().get(fieldKey);
    String originalValue=pf.getValue();
    if (envPrefix != null && originalValue != null && originalValue.contains(cmsPrefix)) {
      String fldValue=originalValue.replaceAll(cmsPrefix,envPrefix + cmsPrefix);
      pageDTO.getPageFields().put(fieldKey,fldValue);
    }
 else {
      pageDTO.getPageFields().put(fieldKey,originalValue);
    }
  }
  return pageDTO;
}
