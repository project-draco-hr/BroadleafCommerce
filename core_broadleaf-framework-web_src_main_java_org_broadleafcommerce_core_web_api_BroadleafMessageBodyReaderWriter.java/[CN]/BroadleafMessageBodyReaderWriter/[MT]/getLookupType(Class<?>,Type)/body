{
  Type lookupType=genericType;
  if (Collection.class.isAssignableFrom(type)) {
    final ParameterizedType pt=(ParameterizedType)genericType;
    lookupType=pt.getActualTypeArguments()[0];
  }
 else   if (type.isArray()) {
    lookupType=type.getComponentType();
  }
  return lookupType;
}
