{
  Product product=catalogService.findProductById(productId);
  if (product.getProductOptions() == null || product.getProductOptions().size() == 0) {
    return false;
  }
  List<List<ProductOptionValue>> allPermutations=generatePermutations(0,new ArrayList<ProductOptionValue>(),product.getProductOptions());
  LOG.info("Total number of permutations: " + allPermutations.size());
  LOG.info(allPermutations);
  for (  List<ProductOptionValue> permutation : allPermutations) {
    Sku permutatedSku=catalogService.createSku();
    permutatedSku.setDefaultProduct(product);
    product.getSkus().add(permutatedSku);
    permutatedSku.setProductOptionValues(permutation);
    catalogService.saveSku(permutatedSku);
  }
  return true;
}
