{
  String contentType=element.getAttributeValue("contentType");
  String contentName=element.getAttributeValue("contentName");
  String maxResultsStr=element.getAttributeValue("maxResults");
  Integer maxResults=null;
  if (maxResultsStr != null) {
    maxResults=Ints.tryParse(maxResultsStr);
  }
  if (maxResults == null) {
    maxResults=Integer.MAX_VALUE;
  }
  String contentListVar=getAttributeValue(element,"contentListVar","contentList");
  String contentItemVar=getAttributeValue(element,"contentItemVar","contentItem");
  String numResultsVar=getAttributeValue(element,"numResultsVar","numResults");
  String fieldFilters=element.getAttributeValue("fieldFilters");
  String sortField=element.getAttributeValue("sortField");
  IWebContext context=(IWebContext)arguments.getContext();
  HttpServletRequest request=context.getHttpServletRequest();
  BroadleafRequestContext blcContext=BroadleafRequestContext.getBroadleafRequestContext();
  Map<String,Object> mvelParameters=buildMvelParameters(request,arguments,element);
  SandBox currentSandbox=blcContext.getSandbox();
  List<StructuredContentDTO> contentItems;
  StructuredContentType structuredContentType=structuredContentService.findStructuredContentTypeByName(contentType);
  Locale locale=blcContext.getLocale();
  contentItems=getContentItems(contentName,maxResults,request,mvelParameters,currentSandbox,structuredContentType,locale,arguments,element);
  if (contentItems.size() > 0) {
    List<Map<String,String>> contentItemFields=new ArrayList<Map<String,String>>();
    for (    StructuredContentDTO item : contentItems) {
      if (StringUtils.isNotEmpty(fieldFilters)) {
        AssignationSequence assignments=StandardExpressionProcessor.parseAssignationSequence(arguments,fieldFilters,false);
        boolean valid=true;
        for (        Assignation assignment : assignments) {
          if (ObjectUtils.notEqual(StandardExpressionProcessor.executeExpression(arguments,assignment.getRight()),item.getValues().get(assignment.getLeft().getValue()))) {
            valid=false;
            break;
          }
        }
        if (valid) {
          contentItemFields.add(item.getValues());
        }
      }
 else {
        contentItemFields.add(item.getValues());
      }
    }
    addToModel(arguments,contentItemVar,contentItemFields.get(0));
    addToModel(arguments,contentListVar,contentItemFields);
    addToModel(arguments,numResultsVar,contentItems.size());
  }
 else {
    if (LOG.isInfoEnabled()) {
      LOG.info("**************************The contentItems is null*************************");
    }
    addToModel(arguments,contentItemVar,null);
    addToModel(arguments,contentListVar,null);
    addToModel(arguments,numResultsVar,0);
  }
}
