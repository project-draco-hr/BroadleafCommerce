{
  Map<String,String> solrFieldKeyMap=getSolrFieldKeyMap(searchCriteria,fields);
  String sortQuery=searchCriteria.getSortQuery();
  if (StringUtils.isBlank(sortQuery)) {
    sortQuery=defaultSort;
  }
  if (StringUtils.isNotBlank(sortQuery)) {
    String[] sortFields=sortQuery.split(",");
    for (    String sortField : sortFields) {
      String field=sortField.split(" ")[0];
      if (solrFieldKeyMap.containsKey(field)) {
        field=solrFieldKeyMap.get(field);
      }
      ORDER order=ORDER.asc;
      String[] sortFieldsSegments=sortField.split(" ");
      if (sortFieldsSegments.length > 0 && "desc".equals(sortFieldsSegments[0])) {
        order=ORDER.desc;
      }
      if (field != null) {
        query.addSort(new SortClause(field,order));
      }
    }
  }
}
