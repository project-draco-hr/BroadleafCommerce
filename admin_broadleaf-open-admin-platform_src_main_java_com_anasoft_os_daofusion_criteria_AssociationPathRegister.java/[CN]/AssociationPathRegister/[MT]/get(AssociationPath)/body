{
  if (!pathToCriteriaMap.containsKey(associationPath)) {
    for (    AssociationPath partialPath : associationPath) {
      if (!pathToCriteriaMap.containsKey(partialPath)) {
        AssociationPath superPath=partialPath.getSuperPath();
        AssociationPathElement lastElement=partialPath.getLastElement();
        Criteria parentCriteria=pathToCriteriaMap.get(superPath);
        Criteria criteria=parentCriteria.createCriteria(lastElement.getValue(),partialPath.getAlias(),lastElement.getJoinType().getHibernateJoinType());
        pathToCriteriaMap.put(partialPath,criteria);
      }
    }
  }
  return pathToCriteriaMap.get(associationPath);
}
