{
  if (CriteriaImpl.class.isAssignableFrom(rootCriteria.getClass())) {
    Iterator<CriteriaImpl.Subcriteria> subCriteriaIterator=CriteriaImpl.class.cast(rootCriteria).iterateSubcriteria();
    while (subCriteriaIterator.hasNext()) {
      CriteriaImpl.Subcriteria subCriteria=subCriteriaIterator.next();
      AssociationPath associationPath=getSubCriteriaAssociationPath(subCriteria);
      pathToCriteriaMap.put(associationPath,subCriteria);
    }
  }
 else {
    LOG.warn("rootCriteria is not a Hibernate CriteriaImpl but {}",rootCriteria.getClass().getName());
  }
  pathToCriteriaMap.put(new AssociationPath(),rootCriteria);
}
