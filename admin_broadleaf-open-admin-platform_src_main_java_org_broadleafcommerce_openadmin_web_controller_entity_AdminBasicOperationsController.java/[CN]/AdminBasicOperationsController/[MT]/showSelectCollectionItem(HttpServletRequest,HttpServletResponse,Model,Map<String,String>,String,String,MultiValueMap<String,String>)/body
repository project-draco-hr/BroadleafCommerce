{
  List<SectionCrumb> sectionCrumbs=getSectionCrumbs(request,null,null);
  PersistencePackageRequest ppr=getSectionPersistencePackageRequest(owningClass,requestParams,sectionCrumbs,pathVars);
  ClassMetadata mainMetadata=service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();
  Property collectionProperty=mainMetadata.getPMap().get(collectionField);
  FieldMetadata md=collectionProperty.getMetadata();
  ppr=PersistencePackageRequest.fromMetadata(md,sectionCrumbs);
  ppr.addFilterAndSortCriteria(getCriteria(requestParams));
  ppr.setStartIndex(getStartIndex(requestParams));
  ppr.setMaxIndex(getMaxIndex(requestParams));
  if (md instanceof BasicFieldMetadata) {
    DynamicResultSet drs=service.getRecords(ppr).getDynamicResultSet();
    ListGrid listGrid=formService.buildCollectionListGrid(null,drs,collectionProperty,owningClass,sectionCrumbs);
    model.addAttribute("listGrid",listGrid);
    model.addAttribute("viewType","modal/simpleSelectEntity");
  }
  model.addAttribute("currentUrl",request.getRequestURL().toString());
  model.addAttribute("modalHeaderType","selectCollectionItem");
  model.addAttribute("collectionProperty",collectionProperty);
  setModelAttributes(model,owningClass);
  return "modules/modalContainer";
}
