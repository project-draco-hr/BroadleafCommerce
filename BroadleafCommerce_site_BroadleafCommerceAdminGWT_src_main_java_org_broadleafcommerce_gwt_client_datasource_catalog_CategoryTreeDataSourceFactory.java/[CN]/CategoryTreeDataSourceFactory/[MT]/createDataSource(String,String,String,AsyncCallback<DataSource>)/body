{
  OperationTypes operationTypes=new OperationTypes(OperationType.JOINTABLE,OperationType.FOREIGNKEY,OperationType.ENTITY,OperationType.ENTITY,OperationType.ENTITY);
  PersistencePerspective persistencePerspective=new PersistencePerspective(operationTypes,new String[]{hasChildrenProperty},new ForeignKey[]{new ForeignKey(defaultParentCategoryForeignKey,EntityImplementations.CATEGORY,null)});
  persistencePerspective.addPersistencePerspectiveItem(PersistencePerspectiveItemType.FOREIGNKEY,new ForeignKey(foreignKeyName,EntityImplementations.CATEGORY,null));
  persistencePerspective.addPersistencePerspectiveItem(PersistencePerspectiveItemType.JOINTABLE,new JoinTable(foreignKeyName,"categoryXrefPK.category","id","categoryXrefPK.subCategory","id",EntityImplementations.CATEGORY_XREF,"displayOrder",true));
  DataSourceModule[] modules=new DataSourceModule[]{new BasicEntityModule(CeilingEntities.CATEGORY,persistencePerspective,AppServices.DYNAMIC_ENTITY),new JoinTableModule(CeilingEntities.CATEGORY,persistencePerspective,AppServices.DYNAMIC_ENTITY)};
  CategoryTreeDataSource dataSource=new CategoryTreeDataSource(CeilingEntities.CATEGORY,name,persistencePerspective,AppServices.DYNAMIC_ENTITY,modules,rootId,rootName);
  dataSource.buildFields(cb);
}
