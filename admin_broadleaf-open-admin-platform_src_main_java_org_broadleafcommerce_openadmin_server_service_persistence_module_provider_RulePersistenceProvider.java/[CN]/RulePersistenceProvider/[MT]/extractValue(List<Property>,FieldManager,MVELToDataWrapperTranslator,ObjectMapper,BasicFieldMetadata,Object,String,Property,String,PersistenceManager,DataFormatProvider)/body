{
  if (metadata.getFieldType() == SupportedFieldType.RULE_SIMPLE) {
    if (value != null) {
      if (value instanceof String) {
        strVal=(String)value;
        propertyItem.setValue(strVal);
        propertyItem.setDisplayValue(displayVal);
      }
      if (value instanceof SimpleRule) {
        SimpleRule simpleRule=(SimpleRule)value;
        if (simpleRule != null) {
          strVal=simpleRule.getMatchRule();
          propertyItem.setValue(strVal);
          propertyItem.setDisplayValue(displayVal);
        }
      }
    }
    Property jsonProperty=convertSimpleRuleToJson(translator,mapper,strVal,metadata.getName() + "Json",metadata.getRuleIdentifier());
    props.add(jsonProperty);
  }
  if (metadata.getFieldType() == SupportedFieldType.RULE_WITH_QUANTITY) {
    if (value != null) {
      if (value instanceof Collection) {
        Property jsonProperty=convertQuantityBasedRuleToJson(translator,mapper,(Collection<QuantityBasedRule>)value,metadata.getName() + "Json",metadata.getRuleIdentifier());
        props.add(jsonProperty);
      }
 else {
        throw new UnsupportedOperationException("RULE_WITH_QUANTITY type is currently only supported" + "on collection fields. A single field with this type is not currently supported.");
      }
    }
  }
}
