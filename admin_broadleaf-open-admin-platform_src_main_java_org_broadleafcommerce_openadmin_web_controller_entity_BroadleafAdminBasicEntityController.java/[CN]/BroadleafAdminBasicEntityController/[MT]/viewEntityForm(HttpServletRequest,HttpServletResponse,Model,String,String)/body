{
  ClassMetadata cmd=service.getClassMetadata(getClassForSection(sectionKey));
  Entity e=service.getRecord(getClassForSection(sectionKey),id);
  EntityForm ef=formService.getEntityForm(cmd,e);
  Map<String,Entity[]> subRecordsMap=service.getSubRecords(getClassForSection(sectionKey),id,cmd);
  for (  Entry<String,Entity[]> entry : subRecordsMap.entrySet()) {
    Class<?> clazz=Class.forName(entry.getValue()[0].getType()[0]);
    ClassMetadata subCmd=service.getClassMetadata(clazz);
    ListGrid listGrid=formService.getListGrid(subCmd,entry.getValue());
    ef.getSubordinateListGrids().put(entry.getKey(),listGrid);
  }
  model.addAttribute("ef",ef);
  setModelAttributes(model,sectionKey);
  return "views/entityForm";
}
