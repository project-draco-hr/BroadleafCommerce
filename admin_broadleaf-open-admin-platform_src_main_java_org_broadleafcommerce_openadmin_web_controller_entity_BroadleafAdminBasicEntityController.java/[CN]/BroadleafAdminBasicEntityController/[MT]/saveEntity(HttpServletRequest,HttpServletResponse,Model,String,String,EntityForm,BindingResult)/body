{
  String sectionClassName=getClassNameForSection(sectionKey);
  Entity entity=service.updateEntity(entityForm,sectionClassName);
  entityValidator.validate(entityForm,entity,result);
  if (result.hasErrors()) {
    ClassMetadata cmd=service.getClassMetadata(sectionClassName);
    Map<String,Entity[]> subRecordsMap=service.getRecordsForAllSubCollections(sectionClassName,id);
    EntityForm newForm=formService.buildEntityForm(cmd,entity,subRecordsMap);
    formService.setEntityFormValues(newForm,entityForm);
    model.addAttribute("entityForm",newForm);
    model.addAttribute("viewType","entityForm");
    setModelAttributes(model,sectionKey);
    return "modules/dynamicModule";
  }
  return "redirect:/" + sectionKey + "/"+ id;
}
