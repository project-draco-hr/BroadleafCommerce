{
  if (dataSource == null) {
    OperationTypes operationTypes=new OperationTypes(OperationType.MAPSTRUCTURE,OperationType.MAPSTRUCTURE,OperationType.MAPSTRUCTURE,OperationType.MAPSTRUCTURE,OperationType.MAPSTRUCTURE);
    PersistencePerspective persistencePerspective=new PersistencePerspective(operationTypes,new String[]{},new ForeignKey[]{});
    persistencePerspective.addPersistencePerspectiveItem(PersistencePerspectiveItemType.FOREIGNKEY,new ForeignKey("id",EntityImplementations.PRODUCT,null));
    persistencePerspective.addPersistencePerspectiveItem(PersistencePerspectiveItemType.MAPSTRUCTURE,MAPSTRUCTURE);
    DataSourceModule[] modules=new DataSourceModule[]{new ComplexValueMapStructureModule(CeilingEntities.PRODUCT,persistencePerspective,AppServices.DYNAMIC_ENTITY,associatedGrid)};
    dataSource=new ComplexValueMapStructureDataSource(CeilingEntities.PRODUCT,name,persistencePerspective,AppServices.DYNAMIC_ENTITY,modules,keyMap);
    dataSource.buildFields(null,cb);
  }
 else {
    if (cb != null) {
      cb.onSuccess(dataSource);
    }
  }
}
