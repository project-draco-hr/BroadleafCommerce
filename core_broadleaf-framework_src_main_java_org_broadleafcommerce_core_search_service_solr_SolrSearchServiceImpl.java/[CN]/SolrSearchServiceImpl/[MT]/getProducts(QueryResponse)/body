{
  final List<Long> productIds=new ArrayList<Long>();
  SolrDocumentList docs=response.getResults();
  for (  SolrDocument doc : docs) {
    Object temp=doc.getFieldValue(shs.getIdFieldName());
    if (temp instanceof String) {
      productIds.add(Long.parseLong((String)temp));
    }
 else {
      productIds.add((Long)temp);
    }
  }
  List<Product> products=productDao.readProductsByIds(productIds);
  if (products != null) {
    Collections.sort(products,new Comparator<Product>(){
      public int compare(      Product o1,      Product o2){
        return new Integer(productIds.indexOf(o1.getId())).compareTo(productIds.indexOf(o2.getId()));
      }
    }
);
  }
  return products;
}
