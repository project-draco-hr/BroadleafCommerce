{
  RequestDTO requestDTO=null;
  requestDTO=(RequestDTO)request.getAttribute(REQUEST_DTO,WebRequest.SCOPE_REQUEST);
  if (requestDTO == null || requestDTO.getRequestDTOAttributes().isEmpty()) {
    RequestDTO globalRequestDTO=(RequestDTO)request.getAttribute(REQUEST_DTO,WebRequest.SCOPE_GLOBAL_SESSION);
    if (globalRequestDTO != null) {
      requestDTO=globalRequestDTO;
      if (LOG.isTraceEnabled()) {
        LOG.trace("Attempt to find timezone from session resulted in " + requestDTO);
      }
    }
  }
  if (requestDTO != null && !requestDTO.getRequestDTOAttributes().isEmpty()) {
    request.setAttribute(REQUEST_DTO,requestDTO,WebRequest.SCOPE_GLOBAL_SESSION);
  }
  return requestDTO;
}
