{
  super.postProcessPersistenceUnitInfo(newPU);
  newPU.addJarFileUrl(newPU.getPersistenceUnitRootUrl());
  String persistenceUnitName=newPU.getPersistenceUnitName();
  MutablePersistenceUnitInfo temp;
  PersistenceUnitInfo pui=getMergedUnit(persistenceUnitName,newPU);
  if (pui != null && Proxy.isProxyClass(pui.getClass())) {
    Jpa2PersistenceUnitInfoDecorator dec=(Jpa2PersistenceUnitInfoDecorator)Proxy.getInvocationHandler(pui);
    temp=(MutablePersistenceUnitInfo)dec.getTarget();
  }
 else {
    temp=(MutablePersistenceUnitInfo)pui;
  }
  temp.setPersistenceUnitRootUrl(null);
  List<String> managedClassNames=newPU.getManagedClassNames();
  for (  String managedClassName : managedClassNames) {
    if (!temp.getManagedClassNames().contains(managedClassName)) {
      temp.addManagedClassName(managedClassName);
    }
  }
  List<String> mappingFileNames=newPU.getMappingFileNames();
  for (  String mappingFileName : mappingFileNames) {
    if (!temp.getMappingFileNames().contains(mappingFileName)) {
      temp.addMappingFileName(mappingFileName);
    }
  }
  temp.setExcludeUnlistedClasses(newPU.excludeUnlistedClasses());
  for (  URL url : newPU.getJarFileUrls()) {
    if (!temp.getJarFileUrls().contains(url)) {
      temp.addJarFileUrl(url);
    }
  }
  temp.setJtaDataSource(newPU.getJtaDataSource());
  temp.setNonJtaDataSource(newPU.getNonJtaDataSource());
  if (temp.getProperties() == null) {
    temp.setProperties(newPU.getProperties());
  }
 else {
    Properties props=newPU.getProperties();
    if (props != null) {
      for (      Object key : props.keySet()) {
        temp.getProperties().setProperty((String)key,props.getProperty((String)key));
      }
    }
  }
  temp.setTransactionType(newPU.getTransactionType());
}
