{
  if (applicationContext.containsBean(DynamicEntityRemoteService.DEFAULTPERSISTENCEMANAGERREF)) {
    PersistenceManager persistenceManager=(PersistenceManager)applicationContext.getBean(DynamicEntityRemoteService.DEFAULTPERSISTENCEMANAGERREF);
    persistenceManager.setTargetMode(TargetModeType.SANDBOX);
    dynamicEntityDao=persistenceManager.getDynamicEntityDao();
    setFields(new ArrayList<FieldData>());
    boolean contextWasNull=false;
    if (BroadleafRequestContext.getBroadleafRequestContext() == null) {
      BroadleafRequestContext brc=new BroadleafRequestContext();
      brc.setIgnoreSite(true);
      BroadleafRequestContext.setBroadleafRequestContext(brc);
      contextWasNull=true;
    }
    try {
      init();
    }
  finally {
      if (contextWasNull) {
        BroadleafRequestContext.setBroadleafRequestContext(null);
      }
    }
  }
}
