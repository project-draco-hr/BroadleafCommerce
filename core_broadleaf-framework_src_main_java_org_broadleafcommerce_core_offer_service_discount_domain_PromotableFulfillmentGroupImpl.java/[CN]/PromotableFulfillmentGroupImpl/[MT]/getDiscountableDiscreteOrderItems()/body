{
  List<PromotableOrderItem> discreteOrderItems=new ArrayList<PromotableOrderItem>();
  for (  FulfillmentGroupItem fgItem : delegate.getFulfillmentGroupItems()) {
    OrderItem orderItem=fgItem.getOrderItem();
    if (orderItem instanceof BundleOrderItemImpl) {
      BundleOrderItemImpl bundleOrderItem=(BundleOrderItemImpl)orderItem;
      for (      DiscreteOrderItem discreteOrderItem : bundleOrderItem.getDiscreteOrderItems()) {
        if (discreteOrderItem.getSku().isDiscountable()) {
          discreteOrderItems.add(itemFactory.createPromotableOrderItem(discreteOrderItem,order));
        }
      }
    }
 else {
      DiscreteOrderItem discreteOrderItem=(DiscreteOrderItem)orderItem;
      if (discreteOrderItem.getSku().isDiscountable() == null || discreteOrderItem.getSku().isDiscountable()) {
        discreteOrderItems.add(itemFactory.createPromotableOrderItem(new DiscreteOrderItemDecorator(discreteOrderItem,fgItem.getQuantity()),order));
      }
    }
  }
  return discreteOrderItems;
}
