{
  c.add(Restrictions.eq("archivedFlag",false));
  c.add(Restrictions.eq("folderFlag",false));
  if (sandbox == null) {
    c.add(Restrictions.isNull("sandbox"));
    return c.list();
  }
 else {
    Criterion originalSandboxExpression=Restrictions.eq("originalSandBox",sandbox);
    Criterion currentSandboxExpression=Restrictions.eq("sandbox",sandbox);
    Criterion productionSandboxExpression=null;
    if (sandbox.getSite() == null || sandbox.getSite().getProductionSandbox() == null) {
      productionSandboxExpression=Restrictions.isNull("sandbox");
    }
 else {
      if (!SandBoxType.PRODUCTION.equals(sandbox.getSandBoxType())) {
        productionSandboxExpression=Restrictions.eq("sandbox",sandbox.getSite().getProductionSandbox());
      }
    }
    if (productionSandboxExpression != null) {
      c.add(Restrictions.or(Restrictions.or(currentSandboxExpression,productionSandboxExpression),originalSandboxExpression));
    }
 else {
      c.add(Restrictions.or(currentSandboxExpression,originalSandboxExpression));
    }
    List<StaticAsset> resultList=(List<StaticAsset>)c.list();
    LinkedHashMap returnItems=new LinkedHashMap<Long,StructuredContent>();
    for (    StaticAsset asset : resultList) {
      returnItems.put(asset.getId(),asset);
    }
    for (    StaticAsset asset : resultList) {
      if (asset.getDeletedFlag()) {
        returnItems.remove(asset.getId());
      }
    }
    return new ArrayList<StaticAsset>(returnItems.values());
  }
}
