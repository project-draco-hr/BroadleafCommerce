{
  TypedQuery<T> q=em.createQuery(toQueryString(),rootClass);
  for (  Entry<String,Object> entry : paramMap.entrySet()) {
    if (entry.getValue() != null) {
      q.setParameter(entry.getKey(),entry.getValue());
    }
  }
  return q;
}
