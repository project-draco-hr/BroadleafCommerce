{
  this.setIsModal(true);
  this.setShowModalMask(true);
  this.setShowMinimizeButton(false);
  this.setCanDragResize(true);
  this.setOverflow(Overflow.VISIBLE);
  hStack=new HStack();
  VStack stack=new VStack();
  stack.setLayoutRightMargin(20);
  dynamicForm=new DynamicForm();
  dynamicForm.setPadding(10);
  stack.addMember(dynamicForm);
  hStack.addMember(stack);
  pictureStack=new VStack();
  pictureStack.setLayoutTopMargin(20);
  previewContainer=new VStack();
  previewContainer.setWidth(60);
  previewContainer.setHeight(60);
  previewContainer.setBorder("1px solid #a6abb4");
  pictureStack.addMember(previewContainer);
  hStack.addMember(pictureStack);
  addItem(hStack);
  saveButton=new IButton("Save");
  saveButton.addClickHandler(new ClickHandler(){
    public void onClick(    ClickEvent event){
      if (dynamicForm.validate()) {
        saveButton.disable();
        cancelButton.disable();
        dynamicForm.saveData(new DSCallback(){
          public void execute(          DSResponse response,          Object rawData,          DSRequest request){
            if (response.getStatus() == RPCResponse.STATUS_SUCCESS) {
              TreeNode record=new TreeNode(request.getData());
              if (handler != null) {
                handler.onItemEdited(new ItemEdited(record,dynamicForm.getDataSource()));
              }
            }
            if (response.getStatus() != RPCResponse.STATUS_VALIDATION_ERROR) {
              hide();
              isHidden=true;
            }
            saveButton.enable();
            cancelButton.enable();
          }
        }
);
      }
    }
  }
);
  cancelButton=new IButton("Cancel");
  cancelButton.addClickHandler(new ClickHandler(){
    public void onClick(    ClickEvent event){
      hide();
      isHidden=true;
    }
  }
);
  vLayout=new VLayout();
  vLayout.setHeight100();
  vLayout.setAlign(VerticalAlignment.BOTTOM);
  HLayout hLayout=new HLayout(10);
  hLayout.setAlign(Alignment.CENTER);
  hLayout.addMember(saveButton);
  hLayout.addMember(cancelButton);
  hLayout.setLayoutTopMargin(40);
  hLayout.setLayoutBottomMargin(40);
  vLayout.addMember(hLayout);
  addItem(vLayout);
}
