{
  Order order=promotableOrder.getDelegate();
  try {
    if (!CollectionUtils.isEmpty(order.getFulfillmentGroups())) {
      order=gatherFulfillmentGroupLinkedDiscreteOrderItems(order,promotableOrder.getMultiShipOptions());
      order=gatherFulfillmentGroupLinkedBundleOrderItems(order);
    }
 else {
      order=gatherOrderLinkedDiscreteOrderItems(order);
      order=gatherOrderLinkedBundleOrderItems(order);
    }
  }
 catch (  PricingException e) {
    throw new RuntimeException("Could not gather the cart",e);
  }
  promotableOrder.setDelegate(order);
  promotableOrder.resetDiscreteOrderItems();
}
