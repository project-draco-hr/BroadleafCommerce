{
  Authentication auth=SecurityContextHolder.getContext().getAuthentication();
  User user=userService.readUserByUsername(auth.getName());
  Order basketOrder=orderService.getCurrentBasketForUserId(user.getId());
  if (request.getParameter("sellableItemId") != null) {
    orderService.addItemToOrder(basketOrder.getId(),new Long(request.getParameter("sellableItemId")),1);
  }
  List<OrderItem> orderItems=orderService.getItemsForOrder(basketOrder.getId());
  Map<Object,Object> model=new HashMap<Object,Object>();
  model.put("listBasket",orderItems);
  return new ModelAndView("listBasket",model);
}
