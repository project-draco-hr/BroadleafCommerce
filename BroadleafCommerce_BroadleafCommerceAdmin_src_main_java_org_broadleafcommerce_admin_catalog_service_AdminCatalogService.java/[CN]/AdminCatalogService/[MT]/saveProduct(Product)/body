{
  product.setAllParentCategories(normalizeCategories(product.getAllParentCategories()));
  if (product.getProductImages() != null && product.getProductImages() instanceof ASObject) {
    product.setProductImages(getImagesMapFromAsObject((ASObject)product.getProductImages()));
  }
  if (product.getProductMedia() != null && product.getProductMedia() instanceof ASObject) {
    product.setProductMedia(getMediaMapFromAsObject((ASObject)product.getProductMedia()));
  }
  return catalogService.saveProduct(product);
}
