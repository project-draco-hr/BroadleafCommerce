{
  Category cat=catalogService.saveCategory(mendCategoryTrees(category));
  int index=0;
  for (  Category parentCategory : cat.getAllParentCategories()) {
    parentCategory.getAllChildCategories().size();
    if (!parentCategory.getAllChildCategories().contains(cat)) {
      parentCategory.getAllChildCategories().add(index,cat);
      catalogService.saveCategory(parentCategory);
      saveCategoryDisplayOrders(parentCategory);
    }
    index++;
  }
  if (cat.getDefaultParentCategory() != null && cat.getAllParentCategories().indexOf(cat.getDefaultParentCategory()) < 0) {
    cat.getDefaultParentCategory().getAllChildCategories().add(cat);
    catalogService.saveCategory(cat.getDefaultParentCategory());
  }
  return cat;
}
