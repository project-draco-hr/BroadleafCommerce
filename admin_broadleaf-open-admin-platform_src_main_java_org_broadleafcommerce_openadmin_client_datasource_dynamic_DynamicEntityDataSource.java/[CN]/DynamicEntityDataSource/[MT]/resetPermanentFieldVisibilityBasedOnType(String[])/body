{
  DataSourceField[] fields=getFields();
  for (  DataSourceField field : fields) {
    Boolean foundType=false;
    if (field.getAttribute("permanentlyHidden") == null || !field.getAttributeAsBoolean("permanentlyHidden") || (field.getAttribute("formHidden") != null && FormHiddenEnum.VISIBLE == field.getAttributeAsObject("formHidden"))) {
      String[] availableTypes=field.getAttributeAsStringArray("availableToTypes");
      if (availableTypes != null) {
        for (        String singleType : type) {
          if (Arrays.binarySearch(availableTypes,singleType) >= 0) {
            foundType=true;
            break;
          }
        }
      }
    }
    if (foundType) {
      field.setHidden(false);
      field.setAttribute("tempFormHidden",false);
    }
 else {
      field.setHidden(true);
      field.setAttribute("tempFormHidden",true);
    }
  }
}
