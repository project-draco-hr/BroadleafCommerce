{
  if (!sku.isActive()) {
    return false;
  }
  if (sku.getInventoryType() == null && (sku.getProduct().getDefaultCategory() == null || sku.getProduct().getDefaultCategory().getInventoryType() == null)) {
    return true;
  }
 else   if (InventoryType.NONE.equals(sku.getInventoryType()) || (sku.getProduct().getDefaultCategory() != null && InventoryType.NONE.equals(sku.getProduct().getDefaultCategory().getInventoryType()))) {
    return true;
  }
  if (quantity == null || quantity < 0) {
    throw new IllegalArgumentException("Quantity must be a positive integer");
  }
  Inventory inventory=null;
  if (fulfillmentLocation == null) {
    inventory=inventoryDao.readInventoryForDefaultFulfillmentLocation(sku);
  }
 else {
    inventory=inventoryDao.readInventory(sku,fulfillmentLocation);
  }
  return inventory != null && inventory.getQuantityAvailable() >= quantity;
}
