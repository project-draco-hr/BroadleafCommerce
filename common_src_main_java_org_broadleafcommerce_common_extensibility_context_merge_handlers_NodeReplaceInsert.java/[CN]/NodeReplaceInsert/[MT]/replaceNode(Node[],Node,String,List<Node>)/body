{
  if (testNode.getAttributes().getNamedItem(attribute) == null) {
    return false;
  }
  ArrayList<Node> filterList=new ArrayList<Node>();
  for (int j=0; j < primaryNodes.length; j++) {
    if (primaryNodes[j].getAttributes().getNamedItem(attribute) != null) {
      filterList.add(primaryNodes[j]);
    }
  }
  Node[] filtered={};
  filtered=filterList.toArray(filtered);
  int pos=NodeUtil.findNode(filtered,testNode,attribute,true);
  if (pos >= 0) {
    Node newNode=filtered[pos].getOwnerDocument().importNode(testNode.cloneNode(true),true);
    filtered[pos].getParentNode().replaceChild(newNode,filtered[pos]);
    usedNodes.add(testNode);
    return true;
  }
  return false;
}
