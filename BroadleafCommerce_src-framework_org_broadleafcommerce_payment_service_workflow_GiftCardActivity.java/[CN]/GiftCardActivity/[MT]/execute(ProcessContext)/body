{
  CombinedPaymentContextSeed seed=((PaymentContext)context).getSeedData();
  Map<PaymentInfo,Referenced> infos=seed.getInfos();
  Iterator<PaymentInfo> itr=infos.keySet().iterator();
  while (itr.hasNext()) {
    PaymentInfo info=itr.next();
    if (info.getType().equals(PaymentInfoType.GIFT_CARD)) {
      if (seed.getActionType() == PaymentActionType.AUTHORIZE) {
        giftCardModule.authorize(info);
      }
 else       if (seed.getActionType() == PaymentActionType.DEBIT) {
        giftCardModule.debit(info);
      }
 else {
        giftCardModule.authorizeAndDebit(info);
      }
    }
  }
  return context;
}
