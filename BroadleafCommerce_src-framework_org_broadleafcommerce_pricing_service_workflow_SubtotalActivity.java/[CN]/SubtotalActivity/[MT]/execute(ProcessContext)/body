{
  Order order=((PricingContext)context).getSeedData();
  Money subTotal=new Money(0D);
  List<OrderItem> orderItems=order.getOrderItems();
  for (  OrderItem orderItem : orderItems) {
    subTotal=subTotal.add(orderItem.getPrice().multiply(orderItem.getQuantity()));
  }
  order.setSubTotal(subTotal);
  for (  FulfillmentGroup fulfillmentGroup : order.getFulfillmentGroups()) {
    Money merchandiseTotal=new Money(0D);
    for (    FulfillmentGroupItem fulfillmentGroupItem : fulfillmentGroup.getFulfillmentGroupItems()) {
      OrderItem item=fulfillmentGroupItem.getOrderItem();
      merchandiseTotal=merchandiseTotal.add(item.getPrice().multiply(item.getQuantity()));
    }
    fulfillmentGroup.setMerchandiseTotal(merchandiseTotal);
  }
  context.setSeedData(order);
  return context;
}
