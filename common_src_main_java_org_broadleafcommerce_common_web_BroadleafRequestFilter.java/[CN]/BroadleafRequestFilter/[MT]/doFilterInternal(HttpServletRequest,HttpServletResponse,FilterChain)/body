{
  if (!shouldProcessURL(request,request.getRequestURI())) {
    if (LOG.isTraceEnabled()) {
      LOG.trace("Process URL not processing URL " + request.getRequestURI());
    }
    filterChain.doFilter(request,response);
    return;
  }
  if (LOG.isTraceEnabled()) {
    String requestURIWithoutContext;
    if (request.getContextPath() != null) {
      requestURIWithoutContext=request.getRequestURI().substring(request.getContextPath().length());
    }
 else {
      requestURIWithoutContext=request.getRequestURI();
    }
    int pos=requestURIWithoutContext.indexOf(";");
    if (pos >= 0) {
      requestURIWithoutContext=requestURIWithoutContext.substring(0,pos);
    }
    LOG.trace("Process URL Filter Begin " + requestURIWithoutContext);
  }
  if (request.getAttribute(REQUEST_DTO) == null) {
    request.setAttribute(REQUEST_DTO,new RequestDTOImpl(request));
  }
  requestProcessor.process(new ServletWebRequest(request,response));
  try {
    filterChain.doFilter(request,response);
  }
  finally {
    SandBoxContext.setSandBoxContext(null);
  }
}
