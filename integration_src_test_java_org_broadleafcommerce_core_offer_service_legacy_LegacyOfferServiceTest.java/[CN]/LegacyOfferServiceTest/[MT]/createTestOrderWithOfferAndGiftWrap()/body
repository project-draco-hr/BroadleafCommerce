{
  Customer customer=customerService.createCustomerFromId(null);
  Order order=orderService.createNewCartForCustomer(customer);
  customerService.saveCustomer(order.getCustomer());
  createCountry();
  createState();
  Address address=new AddressImpl();
  address.setAddressLine1("123 Test Rd");
  address.setCity("Dallas");
  address.setFirstName("Jeff");
  address.setLastName("Fischer");
  address.setPostalCode("75240");
  address.setPrimaryPhone("972-978-9067");
  address.setState(stateService.findStateByAbbreviation("KY"));
  address.setCountry(countryService.findCountryByAbbreviation("US"));
  address.setIsoCountrySubdivision("US-KY");
  address.setIsoCountryAlpha2(isoService.findISOCountryByAlpha2Code("US"));
  FulfillmentGroup group=new FulfillmentGroupImpl();
  group.setAddress(address);
  group.setIsShippingPriceTaxable(true);
  List<FulfillmentGroup> groups=new ArrayList<FulfillmentGroup>();
  group.setMethod("standard");
  group.setService(ShippingServiceType.BANDED_SHIPPING.getType());
  group.setShippingPrice(new Money("0"));
  group.setOrder(order);
  groups.add(group);
  group.setTotal(new Money(0));
  order.setFulfillmentGroups(groups);
  Money total=new Money(5D);
  group.setRetailShippingPrice(total);
  group.setShippingPrice(total);
  DiscreteOrderItem item1;
{
    item1=new DiscreteOrderItemImpl();
    Sku sku=new SkuImpl();
    sku.setName("Test Sku");
    sku.setRetailPrice(new Money(10D));
    sku.setDiscountable(true);
    sku=catalogService.saveSku(sku);
    item1.setSku(sku);
    item1.setQuantity(2);
    item1.setOrder(order);
    item1.setOrderItemType(OrderItemType.DISCRETE);
    item1=(DiscreteOrderItem)orderItemService.saveOrderItem(item1);
    order.addOrderItem(item1);
    FulfillmentGroupItem fgItem=new FulfillmentGroupItemImpl();
    fgItem.setFulfillmentGroup(group);
    fgItem.setOrderItem(item1);
    fgItem.setQuantity(2);
    group.addFulfillmentGroupItem(fgItem);
  }
{
    DiscreteOrderItem item=new DiscreteOrderItemImpl();
    Sku sku=new SkuImpl();
    sku.setName("Test Product 2");
    sku.setRetailPrice(new Money(20D));
    sku.setDiscountable(true);
    sku=catalogService.saveSku(sku);
    item.setSku(sku);
    item.setQuantity(1);
    item.setOrder(order);
    item.setOrderItemType(OrderItemType.DISCRETE);
    item=(DiscreteOrderItem)orderItemService.saveOrderItem(item);
    order.addOrderItem(item);
    FulfillmentGroupItem fgItem=new FulfillmentGroupItemImpl();
    fgItem.setFulfillmentGroup(group);
    fgItem.setOrderItem(item);
    fgItem.setQuantity(1);
    group.addFulfillmentGroupItem(fgItem);
  }
{
    GiftWrapOrderItem item=new GiftWrapOrderItemImpl();
    Sku sku=new SkuImpl();
    sku.setName("Test GiftWrap");
    sku.setRetailPrice(new Money(1D));
    sku.setDiscountable(true);
    sku=catalogService.saveSku(sku);
    item.setSku(sku);
    item.setQuantity(1);
    item.setOrder(order);
    item.getWrappedItems().add(item1);
    item.setOrderItemType(OrderItemType.GIFTWRAP);
    item=(GiftWrapOrderItem)orderItemService.saveOrderItem(item);
    order.addOrderItem(item);
    FulfillmentGroupItem fgItem=new FulfillmentGroupItemImpl();
    fgItem.setFulfillmentGroup(group);
    fgItem.setOrderItem(item);
    fgItem.setQuantity(1);
    group.addFulfillmentGroupItem(fgItem);
  }
  return order;
}
