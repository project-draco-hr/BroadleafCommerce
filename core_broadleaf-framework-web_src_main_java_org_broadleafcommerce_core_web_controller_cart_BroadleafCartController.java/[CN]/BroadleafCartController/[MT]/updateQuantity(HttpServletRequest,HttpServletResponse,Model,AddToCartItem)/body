{
  Order cart=CartState.getCart(request);
  cart=orderService.updateItem(cart.getId(),itemRequest,false);
  cart=orderService.save(cart,true);
  CartState.setCart(request,cart);
  if (isAjaxRequest(request)) {
    Map<String,Object> extraData=new HashMap<String,Object>();
    extraData.put("productId",itemRequest.getProductId());
    extraData.put("cartItemCount",cart.getItemCount());
    model.addAttribute("blcextradata",new ObjectMapper().writeValueAsString(extraData));
    return "ajax/cart";
  }
 else {
    return "redirect:/cart";
  }
}
