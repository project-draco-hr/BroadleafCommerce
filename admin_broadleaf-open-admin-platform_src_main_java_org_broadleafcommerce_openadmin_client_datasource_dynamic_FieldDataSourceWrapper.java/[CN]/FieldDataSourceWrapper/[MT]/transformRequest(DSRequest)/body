{
  Criteria criteria=dsRequest.getCriteria();
  String entered=(String)criteria.getValues().get("title");
  dsRequest.setUseSimpleHttp(true);
  String requestId=dsRequest.getRequestId();
  DSResponse response=new DSResponse();
  response.setAttribute("clientContext",dsRequest.getAttributeAsObject("clientContext"));
  response.setStatus(0);
  HashMap<String,String> duplicateCheck=new HashMap<String,String>();
  List<Record> records=new ArrayList<Record>();
  for (  DataSourceField field : delegate.getFields()) {
    String title=field.getTitle();
    if (title == null) {
      title=field.getName();
    }
    if (!field.getHidden() && (entered == null || entered.equals("") || (title != null && title.toLowerCase().startsWith(entered.toLowerCase())))) {
      if (duplicateCheck.get(title) != null)       continue;
      duplicateCheck.put(title,title);
      Record record=new Record();
      for (      String attribute : field.getAttributes()) {
        record.setAttribute(attribute,field.getAttribute(attribute));
      }
      records.add(record);
    }
  }
  Record[] recordArray=new Record[]{};
  recordArray=records.toArray(recordArray);
  response.setData(recordArray);
  response.setTotalRows(recordArray.length);
  processResponse(requestId,response);
  return dsRequest.getData();
}
