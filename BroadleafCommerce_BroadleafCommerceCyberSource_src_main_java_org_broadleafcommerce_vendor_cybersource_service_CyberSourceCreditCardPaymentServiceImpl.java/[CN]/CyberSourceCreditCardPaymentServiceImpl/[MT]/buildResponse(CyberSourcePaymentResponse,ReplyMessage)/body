{
  logReply(reply);
  paymentResponse.setDecision(reply.getDecision());
  paymentResponse.setInvalidField(reply.getInvalidField());
  paymentResponse.setMerchantReferenceCode(reply.getMerchantReferenceCode());
  paymentResponse.setMissingField(reply.getMissingField());
  if (reply.getReasonCode() != null) {
    paymentResponse.setReasonCode(reply.getReasonCode().intValue());
  }
  paymentResponse.setRequestID(reply.getRequestID());
  paymentResponse.setRequestToken(reply.getRequestToken());
  if (CyberSourceTransactionType.AUTHORIZE.equals(paymentResponse.getTransactionType()) || CyberSourceTransactionType.AUTHORIZEANDCAPTURE.equals(paymentResponse.getTransactionType())) {
    CCAuthReply authReply=reply.getCcAuthReply();
    CyberSourceAuthResponse authResponse=new CyberSourceAuthResponse();
    if (authReply.getAccountBalance() != null) {
      authResponse.setAccountBalance(new Money(authReply.getAccountBalance()));
    }
    if (authReply.getAmount() != null) {
      authResponse.setAmount(new Money(authReply.getAmount()));
    }
    if (authReply.getApprovedAmount() != null) {
      authResponse.setApprovedAmount(new Money(authReply.getApprovedAmount()));
    }
    authResponse.setApprovedTerms(authReply.getApprovedTerms());
    authResponse.setAuthenticationXID(authReply.getAuthenticationXID());
    authResponse.setAuthFactorCode(authReply.getAuthFactorCode());
    authResponse.setAuthorizationCode(authReply.getAuthorizationCode());
    authResponse.setAuthorizationXID(authReply.getAuthorizationXID());
    authResponse.setAuthorizedDateTime(authReply.getAuthorizedDateTime());
    authResponse.setAuthRecord(authReply.getAuthRecord());
    authResponse.setAvsCode(authReply.getAvsCode());
    authResponse.setAvsCodeRaw(authReply.getAvsCodeRaw());
    authResponse.setBmlAccountNumber(authReply.getBmlAccountNumber());
    authResponse.setCardCategory(authReply.getCardCategory());
    authResponse.setCavvResponseCode(authReply.getCavvResponseCode());
    authResponse.setCavvResponseCodeRaw(authReply.getCavvResponseCodeRaw());
    authResponse.setCreditLine(authReply.getCreditLine());
    authResponse.setCvCode(authReply.getCvCode());
    authResponse.setCvCodeRaw(authReply.getCvCodeRaw());
    authResponse.setEnhancedDataEnabled(authReply.getEnhancedDataEnabled());
    authResponse.setForwardCode(authReply.getForwardCode());
    authResponse.setMerchantAdviceCode(authReply.getMerchantAdviceCode());
    authResponse.setMerchantAdviceCodeRaw(authReply.getMerchantAdviceCodeRaw());
    authResponse.setPaymentNetworkTransactionID(authReply.getPaymentNetworkTransactionID());
    authResponse.setPersonalIDCode(authReply.getPersonalIDCode());
    authResponse.setProcessorCardType(authReply.getProcessorCardType());
    authResponse.setProcessorResponse(authReply.getProcessorResponse());
    authResponse.setReasonCode(authReply.getReasonCode());
    authResponse.setReconciliationID(authReply.getReconciliationID());
    authResponse.setReferralResponseNumber(authReply.getReferralResponseNumber());
    authResponse.setSubResponseCode(authReply.getSubResponseCode());
    ((CyberSourceCardResponse)paymentResponse).setAuthResponse(authResponse);
  }
  if (CyberSourceTransactionType.AUTHORIZEANDCAPTURE.equals(paymentResponse.getTransactionType()) || CyberSourceTransactionType.CAPTURE.equals(paymentResponse.getTransactionType())) {
    CCCaptureReply captureReply=reply.getCcCaptureReply();
    CyberSourceCaptureResponse captureResponse=new CyberSourceCaptureResponse();
    if (captureReply.getAmount() != null) {
      captureResponse.setAmount(new Money(captureReply.getAmount()));
    }
    captureResponse.setReasonCode(captureReply.getReasonCode());
    captureResponse.setRequestDateTime(captureResponse.getRequestDateTime());
    captureResponse.setReconciliationID(captureReply.getReconciliationID());
    ((CyberSourceCardResponse)paymentResponse).setCaptureResponse(captureResponse);
  }
  if (CyberSourceTransactionType.CREDIT.equals(paymentResponse.getTransactionType())) {
    CCCreditReply creditReply=reply.getCcCreditReply();
    CyberSourceCreditResponse creditResponse=new CyberSourceCreditResponse();
    if (creditReply.getAmount() != null) {
      creditResponse.setAmount(new Money(creditReply.getAmount()));
    }
    creditResponse.setReasonCode(creditReply.getReasonCode());
    creditResponse.setReconciliationID(creditReply.getReconciliationID());
    creditResponse.setRequestDateTime(creditReply.getRequestDateTime());
    ((CyberSourceCardResponse)paymentResponse).setCreditResponse(creditResponse);
  }
  if (CyberSourceTransactionType.VOIDTRANSACTION.equals(paymentResponse.getTransactionType())) {
    VoidReply voidReply=reply.getVoidReply();
    CyberSourceVoidResponse voidResponse=new CyberSourceVoidResponse();
    if (voidReply.getAmount() != null) {
      voidResponse.setAmount(new Money(voidReply.getAmount()));
    }
    voidResponse.setReasonCode(voidReply.getReasonCode());
    voidResponse.setRequestDateTime(voidReply.getRequestDateTime());
    ((CyberSourceCardResponse)paymentResponse).setVoidResponse(voidResponse);
  }
}
