{
  if (offer != null && order != null) {
    Money adjustmentPrice=order.getAdjustmentPrice();
    if (adjustmentPrice == null) {
      adjustmentPrice=order.getSubTotal();
    }
    if (offer.getDiscountType().equals(OfferDiscountType.AMOUNT_OFF)) {
      value=offer.getValue();
    }
    if (offer.getDiscountType().equals(OfferDiscountType.FIX_PRICE)) {
      value=adjustmentPrice.subtract(new Money(offer.getValue())).getAmount();
    }
    if (offer.getDiscountType().equals(OfferDiscountType.PERCENT_OFF)) {
      value=adjustmentPrice.multiply(offer.getValue().divide(new BigDecimal("100"))).getAmount();
    }
    if (adjustmentPrice.lessThan(value)) {
      value=adjustmentPrice.getAmount();
    }
  }
}
