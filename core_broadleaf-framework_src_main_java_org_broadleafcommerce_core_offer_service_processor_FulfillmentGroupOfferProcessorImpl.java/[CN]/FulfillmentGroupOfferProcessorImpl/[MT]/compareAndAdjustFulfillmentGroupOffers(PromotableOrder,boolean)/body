{
  Money regularOrderDiscountShippingTotal=new Money(0D);
  regularOrderDiscountShippingTotal=regularOrderDiscountShippingTotal.add(order.calculateOrderItemsPriceWithoutAdjustments());
  for (  PromotableFulfillmentGroup fg : order.getFulfillmentGroups()) {
    regularOrderDiscountShippingTotal=regularOrderDiscountShippingTotal.add(fg.getAdjustmentPrice());
  }
  Money discountOrderRegularShippingTotal=new Money(0D);
  discountOrderRegularShippingTotal=discountOrderRegularShippingTotal.add(order.getSubTotal());
  for (  PromotableFulfillmentGroup fg : order.getFulfillmentGroups()) {
    discountOrderRegularShippingTotal=discountOrderRegularShippingTotal.add(fg.getPriceBeforeAdjustments(true));
  }
  if (discountOrderRegularShippingTotal.lessThan(regularOrderDiscountShippingTotal)) {
    order.removeAllFulfillmentAdjustments();
    fgOfferApplied=false;
  }
 else {
    order.removeAllOrderAdjustments();
    order.removeAllItemAdjustments();
    orderItemMergeService.gatherCart(order);
    orderItemMergeService.initializeSplitItems(order);
  }
  return fgOfferApplied;
}
