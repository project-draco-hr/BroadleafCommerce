{
  Money returnPrice=null;
  Money optionValueAdjustments=null;
  if (SkuPricingConsiderationContext.hasDynamicPricing()) {
    if (dynamicPrices == null) {
      DefaultDynamicSkuPricingInvocationHandler handler=new DefaultDynamicSkuPricingInvocationHandler(this);
      List<Class<?>> list=ClassUtils.getAllInterfaces(getClass());
      Class<?>[] intfArray=list.toArray(new Class<?>[list.size()]);
      Sku proxy=(Sku)Proxy.newProxyInstance(getClass().getClassLoader(),intfArray,handler);
      dynamicPrices=SkuPricingConsiderationContext.getSkuPricingService().getSkuPrices(proxy,SkuPricingConsiderationContext.getSkuPricingConsiderationContext());
    }
    returnPrice=dynamicPrices.getRetailPrice();
    optionValueAdjustments=dynamicPrices.getPriceAdjustment();
  }
 else   if (retailPrice != null) {
    return new Money(retailPrice,getCurrency());
  }
 else   if (hasDefaultSku()) {
    returnPrice=lookupDefaultSku().getRetailPrice();
    optionValueAdjustments=getProductOptionValueAdjustments();
  }
  if (returnPrice == null) {
    throw new IllegalStateException("Retail price on Sku with id " + getId() + " was null");
  }
  if (optionValueAdjustments != null) {
    returnPrice=returnPrice.add(optionValueAdjustments);
  }
  return returnPrice;
}
