{
  Inventory inventory=readInventory(sku,fulfillmentLocation);
  if (inventory != null) {
    try {
      em.refresh(inventory,LockModeType.OPTIMISTIC_FORCE_INCREMENT);
      em.flush();
    }
 catch (    OptimisticLockException ex) {
      throw new ConcurrentInventoryModificationException("Error locking inventory object with id: " + inventory.getId());
    }
  }
  return inventory;
}
