{
  if (fieldMetadataOverrides != null && configurationKey != null) {
    Map<String,Map<String,FieldMetadata>> configuredOverrides=fieldMetadataOverrides.get(configurationKey);
    if (configuredOverrides != null) {
      Map<String,FieldMetadata> entityOverrides=configuredOverrides.get(ceilingEntityFullyQualifiedClassname);
      if (entityOverrides != null) {
        for (        String propertyName : entityOverrides.keySet()) {
          FieldMetadata localMetadata=entityOverrides.get(propertyName);
          Boolean excluded=localMetadata.getPresentationAttributes().getExcluded();
          if (excluded == null) {
            excluded=false;
          }
          for (          String key : mergedProperties.keySet()) {
            String testKey=prefix + key;
            if ((testKey.startsWith(propertyName + ".") || testKey.equals(propertyName)) && excluded) {
              FieldMetadata metadata=mergedProperties.get(key);
              FieldPresentationAttributes attr=metadata.getPresentationAttributes();
              if (attr == null) {
                metadata.setPresentationAttributes(new FieldPresentationAttributes());
                attr=metadata.getPresentationAttributes();
              }
              attr.setExcluded(true);
              continue;
            }
            if ((testKey.startsWith(propertyName + ".") || testKey.equals(propertyName)) && !excluded) {
              FieldMetadata metadata=mergedProperties.get(key);
              FieldPresentationAttributes attr=metadata.getPresentationAttributes();
              if (attr == null) {
                metadata.setPresentationAttributes(new FieldPresentationAttributes());
                attr=metadata.getPresentationAttributes();
              }
              if (!isParentExcluded) {
                attr.setExcluded(false);
              }
            }
            if (key.equals(propertyName)) {
              FieldMetadata serverMetadata=mergedProperties.get(key);
              if (localMetadata.getPresentationAttributes().getFriendlyName() != null) {
                serverMetadata.getPresentationAttributes().setFriendlyName(localMetadata.getPresentationAttributes().getFriendlyName());
              }
              if (localMetadata.getPresentationAttributes().getSecurityLevel() != null) {
                serverMetadata.getPresentationAttributes().setSecurityLevel(localMetadata.getPresentationAttributes().getSecurityLevel());
              }
              if (localMetadata.getPresentationAttributes().getVisibility() != null) {
                serverMetadata.getPresentationAttributes().setVisibility(localMetadata.getPresentationAttributes().getVisibility());
              }
              if (localMetadata.getPresentationAttributes().getOrder() != null) {
                serverMetadata.getPresentationAttributes().setOrder(localMetadata.getPresentationAttributes().getOrder());
              }
              if (localMetadata.getPresentationAttributes().getExplicitFieldType() != null) {
                serverMetadata.getPresentationAttributes().setExplicitFieldType(localMetadata.getPresentationAttributes().getExplicitFieldType());
                serverMetadata.setFieldType(localMetadata.getPresentationAttributes().getExplicitFieldType());
              }
              if (localMetadata.getPresentationAttributes().getGroup() != null) {
                serverMetadata.getPresentationAttributes().setGroup(localMetadata.getPresentationAttributes().getGroup());
              }
              if (localMetadata.getPresentationAttributes().getGroupCollapsed() != null) {
                serverMetadata.getPresentationAttributes().setGroupCollapsed(localMetadata.getPresentationAttributes().getGroupCollapsed());
              }
              if (localMetadata.getPresentationAttributes().getGroupOrder() != null) {
                serverMetadata.getPresentationAttributes().setGroupOrder(localMetadata.getPresentationAttributes().getGroupOrder());
              }
              if (localMetadata.getPresentationAttributes().isLargeEntry() != null) {
                serverMetadata.getPresentationAttributes().setLargeEntry(localMetadata.getPresentationAttributes().isLargeEntry());
              }
              if (localMetadata.getPresentationAttributes().isProminent() != null) {
                serverMetadata.getPresentationAttributes().setProminent(localMetadata.getPresentationAttributes().isProminent());
              }
              if (localMetadata.getPresentationAttributes().getColumnWidth() != null) {
                serverMetadata.getPresentationAttributes().setColumnWidth(localMetadata.getPresentationAttributes().getColumnWidth());
              }
              if (!StringUtils.isEmpty(localMetadata.getPresentationAttributes().getBroadleafEnumeration()) && !localMetadata.getPresentationAttributes().getBroadleafEnumeration().equals(serverMetadata.getPresentationAttributes().getBroadleafEnumeration())) {
                serverMetadata.getPresentationAttributes().setBroadleafEnumeration(localMetadata.getPresentationAttributes().getBroadleafEnumeration());
                setupBroadleafEnumeration(localMetadata.getPresentationAttributes().getBroadleafEnumeration(),serverMetadata);
              }
              if (localMetadata.getPresentationAttributes().getReadOnly() != null) {
                serverMetadata.getPresentationAttributes().setReadOnly(localMetadata.getPresentationAttributes().getReadOnly());
              }
              if (localMetadata.getPresentationAttributes().getExcluded() != null) {
                serverMetadata.getPresentationAttributes().setExcluded(localMetadata.getPresentationAttributes().getExcluded());
              }
              if (isParentExcluded) {
                serverMetadata.getPresentationAttributes().setExcluded(true);
              }
              if (localMetadata.getPresentationAttributes().getTooltip() != null) {
                serverMetadata.getPresentationAttributes().setTooltip(localMetadata.getPresentationAttributes().getTooltip());
              }
              if (localMetadata.getPresentationAttributes().getRequiredOverride() != null) {
                serverMetadata.getPresentationAttributes().setRequiredOverride(localMetadata.getPresentationAttributes().getRequiredOverride());
              }
              if (localMetadata.getPresentationAttributes().getValidationConfigurations() != null) {
                serverMetadata.getPresentationAttributes().setValidationConfigurations(localMetadata.getPresentationAttributes().getValidationConfigurations());
              }
              if (localMetadata.getLength() != null) {
                serverMetadata.setLength(localMetadata.getLength());
              }
              if (localMetadata.getUnique() != null) {
                serverMetadata.setUnique(localMetadata.getUnique());
              }
              if (localMetadata.getScale() != null) {
                serverMetadata.setScale(localMetadata.getScale());
              }
              if (localMetadata.getPrecision() != null) {
                serverMetadata.setPrecision(localMetadata.getPrecision());
              }
            }
          }
        }
      }
    }
  }
}
