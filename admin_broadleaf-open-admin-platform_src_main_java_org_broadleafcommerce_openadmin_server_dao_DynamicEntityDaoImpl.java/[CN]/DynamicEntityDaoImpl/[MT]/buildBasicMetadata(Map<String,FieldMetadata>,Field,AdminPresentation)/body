{
  BasicFieldMetadata metadata=new BasicFieldMetadata();
  metadata.setName(field.getName());
  metadata.setFriendlyName(annot.friendlyName());
  metadata.setSecurityLevel(annot.securityLevel());
  metadata.setVisibility(annot.visibility());
  metadata.setOrder(annot.order());
  metadata.setExplicitFieldType(annot.fieldType());
  if (annot.fieldType() == SupportedFieldType.ADDITIONAL_FOREIGN_KEY) {
    metadata.setExcluded(true);
  }
 else {
    metadata.setExcluded(annot.excluded());
  }
  metadata.setGroup(annot.group());
  metadata.setGroupOrder(annot.groupOrder());
  metadata.setGroupCollapsed(annot.groupCollapsed());
  metadata.setLargeEntry(annot.largeEntry());
  metadata.setProminent(annot.prominent());
  metadata.setColumnWidth(annot.columnWidth());
  metadata.setBroadleafEnumeration(annot.broadleafEnumeration());
  metadata.setReadOnly(annot.readOnly());
  metadata.setTooltip(annot.tooltip());
  metadata.setHelpText(annot.helpText());
  metadata.setHint(annot.hint());
  metadata.setLookupDisplayProperty(annot.lookupDisplayProperty());
  metadata.setLookupParentDataSourceName(annot.lookupParentDataSourceName());
  metadata.setTargetDynamicFormDisplayId(annot.targetDynamicFormDisplayId());
  if (annot.fieldType() == SupportedFieldType.DATA_DRIVEN_ENUMERATION) {
    if (annot.optionListEntity() == void.class || StringUtils.isEmpty(annot.optionValueFieldName()) || StringUtils.isEmpty(annot.optionDisplayFieldName())) {
      throw new IllegalArgumentException("Problem setting up data driven enumeration for (" + field.getName() + "). For SupportedFieldType of DATA_DRIVEN_ENUMERATION, the optionListEntity, optionValueFieldName and optionDisplayFieldName properties of @AdminPresentation must all be filled out.");
    }
  }
  metadata.setOptionCanEditValues(annot.optionCanEditValues());
  metadata.setOptionDisplayFieldName(annot.optionDisplayFieldName());
  metadata.setOptionListEntity(annot.optionListEntity().getName());
  metadata.setOptionValueFieldName(annot.optionValueFieldName());
  metadata.setRequiredOverride(annot.requiredOverride() == RequiredOverride.IGNORED ? null : annot.requiredOverride() == RequiredOverride.REQUIRED);
  if (annot.validationConfigurations().length != 0) {
    ValidationConfiguration[] configurations=annot.validationConfigurations();
    for (    ValidationConfiguration configuration : configurations) {
      ConfigurationItem[] items=configuration.configurationItems();
      Map<String,String> itemMap=new HashMap<String,String>();
      for (      ConfigurationItem item : items) {
        itemMap.put(item.itemName(),item.itemValue());
      }
      metadata.getValidationConfigurations().put(configuration.validationImplementation(),itemMap);
    }
  }
  attributes.put(field.getName(),metadata);
}
