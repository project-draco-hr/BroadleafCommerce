{
  Order order=cartService.createNewCartForCustomer(createCustomer());
  order.addOrderItem(createDiscreteOrderItem(sku1,100D,50D,true,2));
  order.addOrderItem(createDiscreteOrderItem(sku2,100D,50D,true,2));
  order.addAddedOfferCode(createOfferCode("25 Dollars Off Item Offer",OfferType.ORDER_ITEM,OfferDiscountType.AMOUNT_OFF,25,null,null,true,true,1));
  order.addAddedOfferCode(createOfferCode("35 Dollars Off Item Offer",OfferType.ORDER_ITEM,OfferDiscountType.AMOUNT_OFF,35,null,null,true,true,1));
  order.addAddedOfferCode(createOfferCode("45 Dollars Off Item Offer",OfferType.ORDER_ITEM,OfferDiscountType.AMOUNT_OFF,45,null,null,true,false,1));
  order.addAddedOfferCode(createOfferCode("30 Dollars Off Order Offer",OfferType.ORDER,OfferDiscountType.AMOUNT_OFF,30,null,null,true,true,1));
  order.setFulfillmentGroups(createFulfillmentGroups("standard",5D,order));
  List<Offer> offers=offerService.buildOfferListForOrder(order);
  offerService.applyOffersToOrder(offers,order);
  assert(order.getAdjustmentPrice().equals(new Money(130D)));
}
