{
  OfferAudit oa=(OfferAudit)entityConfiguration.createEntityInstance("offerAudit");
  oa.setOffer(offer);
  oa.setRedeemedDate(new Date(DateUtil.getNow().getTime()));
  oa.setRelatedId(orderItem.getId());
  oa.setRelatedPrice(getOfferAmount(offer,orderItem.getRetailPrice()));
  oa.setRelatedRetailPrice(orderItem.getRetailPrice());
  oa.setRelatedSalePrice(orderItem.getSalePrice());
  oa.setOfferCodeId(lookupCodeByOffer(offer).getId());
  return oa;
}
