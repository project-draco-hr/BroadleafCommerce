{
  Order cartOrder=orderDao.readCartForCustomer(namedOrder.getCustomer());
  if (cartOrder == null) {
    cartOrder=createNewCartForCustomer(namedOrder.getCustomer());
  }
  if (moveNamedOrderItems) {
    Order updatedNamedOrder=removeItemFromOrder(namedOrder,orderItem);
    if (updatedNamedOrder.getOrderItems().size() == 0 && deleteEmptyNamedOrders) {
      cancelOrder(updatedNamedOrder);
    }
  }
  return addOrderItemToOrder(cartOrder,orderItem);
}
