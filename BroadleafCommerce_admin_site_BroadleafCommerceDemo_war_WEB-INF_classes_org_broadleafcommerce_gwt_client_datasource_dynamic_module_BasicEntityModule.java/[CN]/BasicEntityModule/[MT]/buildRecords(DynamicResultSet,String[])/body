{
  List<TreeNode> recordList=new ArrayList<TreeNode>();
  int decrement=0;
  for (  Entity entity : result.getRecords()) {
    if (filterOutIds == null || (filterOutIds != null && Arrays.binarySearch(filterOutIds,entity.findProperty(dataSource.getPrimaryKeyFieldName()).getValue()) < 0)) {
      TreeNode record=(TreeNode)buildRecord(entity,false);
      recordList.add(record);
    }
 else {
      decrement++;
    }
  }
  result.setTotalRecords(result.getTotalRecords() - decrement);
  TreeNode[] response=new TreeNode[recordList.size()];
  response=recordList.toArray(response);
  return response;
}
