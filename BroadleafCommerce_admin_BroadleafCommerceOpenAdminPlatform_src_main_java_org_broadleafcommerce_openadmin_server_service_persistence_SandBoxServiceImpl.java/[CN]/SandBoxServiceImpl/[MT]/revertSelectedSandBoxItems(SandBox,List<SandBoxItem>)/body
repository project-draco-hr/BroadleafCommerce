{
  for (  SandBoxItem item : sandBoxItems) {
    if (item.getArchivedFlag()) {
      throw new IllegalArgumentException("Cannot revert an archived SandBoxItem");
    }
  }
  SandBoxAction action=createSandBoxAction(SandBoxActionType.REVERT,null);
  for (  SandBoxItem sandBoxItem : sandBoxItems) {
    action.addSandBoxItem(sandBoxItem);
    for (    SandBoxItemListener listener : sandboxItemListeners) {
      listener.itemReverted(sandBoxItem);
    }
    sandBoxItem.setArchivedFlag(true);
    sandBoxItem.addSandBoxAction(action);
  }
}
